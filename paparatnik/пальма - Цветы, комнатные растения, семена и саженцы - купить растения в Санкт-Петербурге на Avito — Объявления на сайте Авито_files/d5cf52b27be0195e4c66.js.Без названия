(window.webpackJsonp=window.webpackJsonp||[]).push([["520eb752"],{2381:function(e,t,n){"use strict";function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}n.d(t,"a",function(){return a});var a=function(){function o(e){var t=e.server,n=e.seqId,a=e.token,i=e.headers,r=void 0===i?{}:i;babelHelpers.classCallCheck(this,o),this.server=t,this.headers=r,this.seqId=n||1,this.odd=n%2,this.token=a}return babelHelpers.createClass(o,[{key:"request",value:function(e,t){return this.fetching({method:e,params:t})}},{key:"notify",value:function(e,t){return this.fetching({method:e,params:t},!0)}},{key:"abortableRequest",value:function(e,t){var n=window.AbortController?new window.AbortController:{},a=n.signal;return{abort:function(){n.abort&&n.abort()},fetching:this.fetching({method:e,params:t,signal:a})}}},{key:"fetching",value:function(e,t){var a=this,n=e.method,i=e.signal,r=e.params,o=void 0===r?{}:r,s={jsonrpc:"2.0",method:n.replace(/\//g,"."),params:o};return t||(s.id=this.generateId(),s.uid=Date.now()+"-"+Math.random().toString(36).substring(0,10)),this.token&&(s.params.token=this.token),new Promise(function(n,t){fetch(a.server,{method:"post",credentials:"same-origin",headers:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(n,!0).forEach(function(e){babelHelpers.defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({Accept:"application/json","Content-Type":"application/json"},a.headers),body:JSON.stringify(s),signal:i}).then(function(e){if(200<=e.status&&e.status<300)return-1!==e.headers.get("content-type").indexOf("application/json")?e.json():e.text();var t=new Error(e.statusText);throw t.responseOriginal=e,t}).then(function(e){e.error||(a.checkToken(e),n(e.result));var t=new Error(e.statusText);throw t.response=e,t}).catch(function(e){"AbortError"!==e.name?e.responseOriginal?e.responseOriginal.json().then(function(e){a.checkToken(e),t(e.error)}).catch(function(){t({})}):e.response?t(e.response.error):t({}):t(e)})})}},{key:"checkToken",value:function(e){e.token&&(this.token=e.token)}},{key:"setToken",value:function(e){this.token=e}},{key:"generateId",value:function(){var e=this.seqId;return this.seqId+=2,this.seqId>Number.MAX_SAFE_INTEGER&&(this.seqId=Number.MIN_SAFE_INTEGER+(this.odd?0:1)),e}}]),o}()},6035:function(e,t,n){"use strict";n.r(t);var j=n(2381),o=new j.a({server:"/delivery"}),a=function(){function r(){var t=this;babelHelpers.classCallCheck(this,r),babelHelpers.defineProperty(this,"handleClickGlobalLink",function(e){e.preventDefault();var t=e.target.dataset,n=t.notfound,a=t.shortResults,i=setTimeout(function(){location.href=e.target.href},300);o.notify("events",{name:"searchresults",isSearchResultEmpty:Boolean(n),isBannerOnFirstPage:Boolean(a)}).then(function(){clearTimeout(i),location.href=e.target.href})}),babelHelpers.defineProperty(this,"handleSearchUpdate",function(){var e=t.isDeliveryDisabled();t.deliveryCheckboxCheckboxNode.disabled=e,t.deliveryCheckboxLabelNode.classList.toggle("hidden",e)});var e=document.querySelector(".js-catalog-search-checkboxes");if(e){var n=e.dataset,a=n.deliveryCategories,i=n.deliveryLocations;this.availableCategories=JSON.parse(a),this.allowedLocations=JSON.parse(i),this.globalSearchLinkNode=document.querySelector(".js-catalog-delivery-notfound-link"),this.searchFormNode=document.querySelector(".js-search-form-catalog"),this.categorySelectNode=this.searchFormNode.querySelector(".js-search-form-category"),this.locationSelectNode=this.searchFormNode.querySelector(".js-search-form-region"),this.deliveryCheckboxLabelNode=this.searchFormNode.querySelector(".js-search-form-delivery"),this.deliveryCheckboxCheckboxNode=this.searchFormNode.querySelector(".js-search-form-delivery-checkbox"),this.init()}}return babelHelpers.createClass(r,[{key:"init",value:function(){this.categorySelectNode.addEventListener("change",this.handleSearchUpdate),this.locationSelectNode.addEventListener("change",this.handleSearchUpdate),this.globalSearchLinkNode&&this.globalSearchLinkNode.addEventListener("click",this.handleClickGlobalLink),this.handleSearchUpdate()}},{key:"isDeliveryDisabled",value:function(){var e=parseInt(this.categorySelectNode.value,10),t=parseInt(this.locationSelectNode.value,10);return!this.availableCategories.includes(e)||!this.allowedLocations.includes(t)}}]),r}(),c=n(6055),i=n(2382),r=n(2384),s=n(2385),l=n(111),d=document.querySelector(".js-catalog-list"),u=document.querySelector(".js-item-phone-popup-content"),h=null,p=null,v=$(".js-item-tooltip");u&&(h=new s.a({moveDataNode:u,isFlipPopup:!0}));var m=null,f=null;0<v.length&&(p=new r.a({$node:v})).$tooltip.on("hide.tooltip",function(){m&&m.classList.remove("charging-active")});var g=function(e){function i(e){var a,t=e.$node;return babelHelpers.classCallCheck(this,i),a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(i).call(this,{$node:t})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"initNodes",function(){a.itemContactsWrapperNode=a.node.closest(".js-item_table-extended-contacts"),a.favoritesNode=a.itemNode.querySelector(".js-favorites-add-toggle"),a.favoritesIconNode=a.favoritesNode.querySelector(".js-favorites-add-icon"),u&&(a.itemPopupFrontSideNode=u.querySelector(".js-item-popup-flip-card-content_front-side"),a.itemPopupBackSideNode=u.querySelector(".js-item-popup-flip-card-content_back-side"))}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"showPopup",function(){h.setFrontSide(),h.show(),h.showLoader(),fetch("/cv/current_package",{method:"post",credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"})}).then(function(e){return e.json()}).then(function(e){h.hideLoader(),a.cvPackage=e.package,a.setPackageState(),a.renderPackage(),a.attachPackageEvents()}).catch()}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"renderContact",function(){var e='\n            <div class="item-phone-big-number js-item-phone-big-number">\n                <img src="'.concat(a.image,'"/>\n            </div>\n            <div class="item-phone-call-note">\n                Скажите соискателю, что нашли это объявление на ').concat(avito.siteName?avito.siteName:"Avito",'\n            </div>\n            <div class="js-seller-name seller-name">\n                ').concat(a.sellerName,"\n            </div>");a.itemPopupBackSideNode.innerHTML=e}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"acceptViewCV",function(e){e.preventDefault(),h.showLoader(),fetch("/cv/view",{method:"post",body:"itemId=".concat(a.itemId),credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"})}).then(function(e){return e.json()}).then(function(e){return!e&&!e.status||"error"===e.status?(h.hideLoader(),Promise.reject()):"ok"===e.status?(1===a.cvPackage.countLeft&&delete d.dataset.cvPackage,a.sellerName=e.item.user.name,a.getPhoneNumber()):null}).then(function(e){return e.ok?e.json():Promise.reject()}).then(function(e){var t=e.error,n=e.image64;t?Promise.reject():(a.image=n,a.renderContact(),a.setPhoneNumber(n),h.flip(),h.hideLoader(),i.currentFavoritesNode=a.favoritesNode)}).catch(function(){})}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"setPhoneNumber",function(e){var t=new Image;t.className="item-extended-phone",t.src=e,a.node.replaceWith(t),a.itemContactsWrapperNode.classList.remove("item_table-extended-contacts_transparent")}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"isLoading",function(e){a.node.classList.toggle("is-loading",e),a.itemContactsWrapperNode&&a.itemContactsWrapperNode.classList.toggle("is-loading",e)}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"getPhoneNumber",function(){var e=a.isXlSnippet?"xs":"s",t="/items/phone/".concat(a.itemId,"?pkey=").concat(avito.utils.phoneDemixer(a.itemId,a.phoneKey),"&vsrc=").concat(e);return fetch(t,{method:"GET",credentials:"same-origin"})}),a.node=a.$node.get(0),a.itemNode=a.node.closest(".js-catalog-item-enum"),a.itemId=a.itemNode.dataset.itemId,a.phoneKey=a.itemNode.dataset.pkey,a.packageState=null,a.packageFreePercent=null,a.isXlSnippet="isXl"in a.itemNode.dataset,a.isResumeItem=a.itemNode.classList.contains("item_resume"),a.initNodes(),a.attachEvents(),a}return babelHelpers.inherits(i,e),babelHelpers.createClass(i,[{key:"showTooltip",value:function(e){p.hide(),f&&f.classList.remove("charging-active"),f=m,(m=this.itemContactsWrapperNode).classList.add("charging-active"),p.show({position:{side:["bottom","center"],relativeNode:this.node,offset:{top:10},slide:!1},content:e,maxWidth:195,autoHideTime:2e4})}},{key:"setPackageState",value:function(){this.packageFreePercent=this.cvPackage.countLeft?Math.round(100*this.cvPackage.countLeft/this.cvPackage.totalCount):0,this.packageState="bad",this.cvPackage.isInactive?this.packageState="inactive":50<this.packageFreePercent?this.packageState="good":20<this.packageFreePercent&&(this.packageState="mid")}},{key:"renderPackage",value:function(){var e='\n            <div class="chargeable-packet js-chargeable-packet">\n                <div class="chargeable-packet-header">Доступ к контактным данным соискателя</div>\n                <p class="chargeable-packet-sub-text">\n                    Для доступа к контактным данным воспользуйтесь действующим пакетом просмотров.\n                </p>\n                <div class="cv-package">\n                    <div class="status-bar status-bar_'.concat(this.packageState,' js-status-bar">\n                        <div class="status-bar__inner">\n                            <div class="status-bar__percent-line js-status-bar__percent-line"\n                                style="width: ').concat(this.packageFreePercent,'%"></div>\n                            <div class="status-bar__text js-status-bar__status-name">\n                                ').concat(this.cvPackage.countLeft?"".concat(this.cvPackage.countLeft,"/").concat(this.cvPackage.totalCount):"В пакете не осталось просмотров",'\n                            </div>\n                        </div>\n                    </div>\n                    <div class="cv-package-info clearfix">\n                        <div class="cv-package-title">\n                            Пакет просмотров\n                        </div>\n                        <div class="cv-package-status js-cv-package-status">').concat(this.cvPackage.statusText,'</div>\n                    </div>\n                </div>\n\n                <p class="chargeable-packet-info js-chargeable-packet-info">\n                    Из пакета будет списан 1 просмотр из\n                    <span class="js-cv-package-count-left">\n                        ').concat(this.cvPackage.countLeft,"\n                    </span> ").concat(l.i18n.plural(this.cvPackage.countLeft,["оставшегося","оставшихся","оставшихся"]),'.\n                </p>\n\n                <div class="chargeable-packet-actions">\n                    <button class="chargeable-packet-accept\n                        js-chargeable-packet-accept button button-origin button-origin_large">Показать контакт</button>\n                </div>\n            </div>');this.itemPopupFrontSideNode.innerHTML=e}},{key:"attachPackageEvents",value:function(){var e=document.querySelector(".js-chargeable-packet-accept");e&&e.addEventListener("click",this.acceptViewCV)}},{key:"attachEvents",value:function(){var a=this;this.node.addEventListener("click",function(e){e.stopPropagation(),a.isLoading(!0),a.getPhoneNumber().then(function(e){if(a.isLoading(!1),e.ok)return e.json();throw 401===e.status&&(window.location="#login?s=ps"),new Error("JSON hasn't been got")}).then(function(e){var t=e.image64,n=e.error;void 0!==t?(a.isResumeItem&&i.addToFavorites(a.favoritesNode),a.setPhoneNumber(t)):"no_cv_view"===n&&("cvPackage"in d.dataset?a.showPopup():a.showTooltip(function(e){return'<p>Для связи с соискателем\n        <a href="/account/cv_packages?item_id='.concat(e,'">оплатите доступ к контактам</a>\n    </p>')}(a.itemId)))}).catch(function(){a.isLoading(!1)})})}}]),i}(i.a);babelHelpers.defineProperty(g,"addToFavorites",function(e){g.isActiveFavorites(e)||e.click()}),babelHelpers.defineProperty(g,"isActiveFavorites",function(e){return"empty"!==e.querySelector(".js-favorites-add-icon").dataset.state}),$.mediator.on("popup:hidden",function(){g.currentFavoritesNode&&(g.addToFavorites(g.currentFavoritesNode),g.currentFavoritesNode=null)});var N=n(5957),P=".js-item-extended",C=".js-item-extended-contacts",I=".js-item-extened-contacts-guest",b=document.querySelector(".js-anonym-phone-popup-content"),y=b?new s.a({moveDataNode:b,isFlipPopup:!0}):null,k=y?b.querySelector(".js-item-popup-flip-card-content_front-side"):null,w=function(){function t(){var e=this;babelHelpers.classCallCheck(this,t),babelHelpers.defineProperty(this,"showPopup",function(e){var t=e.image,n=e.sellerName,a=void 0===n?"":n;if(null!==y&&null!==k){var i='\n            <div class="item-phone-big-number js-item-phone-big-number">\n                <img src="'.concat(t,'"/>\n            </div>\n            <div class="item-phone-call-note">\n                Номер продавца защищён. SMS и сообщения в WhatsApp, Viber доставлены не будут.\n            </div>\n            <div class="js-seller-name seller-name">\n                ').concat(a,"\n            </div>");k.innerHTML=i,y.show()}}),babelHelpers.defineProperty(this,"sendSerpPhoneButtonClick",function(e){var t=e.dataset,n=t.searchHash,a=void 0===n?"":n,i=t.itemId,r=void 0===i?0:i,o=t.fromBlock,s=void 0===o?0:o;Object(c.h)({eid:2216,version:3,iid:r,x:a,from_block:s})}),this.handleDocumentClick=this.handleDocumentClick.bind(this),this.handleWindowScroll=this.handleWindowScroll.bind(this),this.trackableNodes=[],this.imagesNodes={},document.addEventListener("click",this.handleDocumentClick),window.addEventListener("scroll",Object(c.i)(this.handleWindowScroll,500)),this.handleWindowScroll(),this.handleChargedResumeItems(),this.showContactButtons(),document.addEventListener("single-page:updateCatalog",function(){e.handleChargedResumeItems(),e.showContactButtons()},!1)}return babelHelpers.createClass(t,[{key:"handleWindowScroll",value:function(){var r=window.innerHeight,o=[];this.trackableNodes=this.trackableNodes.filter(function(e){var t=e.getBoundingClientRect().bottom;if(t<r){var n=e.dataset,a=n.itemId,i=n.position;o.push({itemId:a,position:i})}return r<t})}},{key:"handleDocumentClick",value:function(e){var c=this,l=e.target.closest(I),d=e.target.closest(C)||l,a=e.target.href;if(d){this.sendSerpPhoneButtonClick(d);var t=d.dataset,n=t.itemCategoryId,i=t.cvSimpleTest,r=t.searchHash,o="111"===n,s="112"===n;if(l){var u=new j.a({server:"/cv/simple/"}),h=l.dataset.itemId;u.notify("eventPhoneRequest",{itemId:h,vsrc:"xs"})}if(o&&i&&e.preventDefault(),!s){var p=d.closest(".js-item_table-extended-contacts")||d.closest(".js-item_gallery-extended-contacts");this.showSpinnerOnButton(d,p);var v=d.closest(P),m=v.dataset,f=m.itemId,g=m.position,b=m.pkey,y="isXl"in v.dataset,k="hasGridContact"in v.dataset,w=y?"xs":k?"gs":"s",S="/items/phone/".concat(f,"?\n            pkey=").concat(avito.utils.phoneDemixer(f,b),"&h=36&vsrc=").concat(w,"&searchHash=").concat(r);y&&this.sendCSPhoneShow(f,g),this.requestPhoneNumber(S).then(function(e){return new Promise(function(t,n){return"user_unauth"===e.error?(a||t(),window.location=a,c.removeSpinnerOnButton(d,p),null):"cv_simple_require"!==e.error?t(e):(new N.a({itemId:Number(f)}).show(function(e){e.success?c.requestPhoneNumber(S).then(t,n):t()}),null)}).then(function(e){if(!e)return c.removeSpinnerOnButton(d,p),null;var t=e.error,n=e.anonymImage64,a=e.image64,i=e.isAnonym,r=e.sellerName;if(t)return Promise.reject();var o=l?I:C,s=document.querySelector("".concat(o,'[data-item-id="').concat(f,'"]'));return c.replaceButtonWithImage(a,f,s),i&&c.showPopup({image:n,sellerName:r}),null})}).catch(function(){c.handleError(d)})}}}},{key:"replaceButtonWithImage",value:function(e,t,n){if(n&&e){var a=this.createImageNode(e);n.replaceWith(a),this.imagesNodes[t]=a}}},{key:"createImageNode",value:function(e){var t=new Image;return t.className="item-extended-phone",t.src=e,t}},{key:"removeSpinnerOnButton",value:function(e,t){e.classList.remove("is-loading"),t&&t.classList.remove("is-loading")}},{key:"showSpinnerOnButton",value:function(e,t){e.classList.add("is-loading"),t&&t.classList.add("is-loading")}},{key:"sendCSPhoneShow",value:function(e,t){var n=new FormData;n.append("itemId",e),n.append("position",t),fetch("/js/event/extended-snippet/phone/show",{method:"POST",credentials:"same-origin",body:n})}},{key:"requestPhoneNumber",value:function(e){return fetch(e,{method:"GET",credentials:"same-origin"}).then(function(e){return e.ok?e.json():Promise.reject()})}},{key:"handleError",value:function(e){var t=document.createElement("div");t.innerText="Что-то пошло не так",t.className="item-extended-phone-error",e.replaceWith(t)}},{key:"fixContactButton",value:function(e){if(e){var t=e.dataset.itemId,n=this.imagesNodes[t];n&&e.replaceWith(n)}}},{key:"add",value:function(e){var t=this,n=document.querySelector(e);n&&(Array.from(n.querySelectorAll(P),function(e){t.fixContactButton(e.querySelector(C))}),Array.from(n.querySelectorAll(".js-item-trackable"),function(e){t.trackableNodes.push(e)}),this.handleWindowScroll())}},{key:"handleChargedResumeItems",value:function(){Array.from(document.querySelectorAll(".js-resume-contact")).forEach(function(e){new g({$node:$(e)})})}},{key:"showContactButtons",value:function(){Array.from(document.querySelectorAll(".js-item_table-extended-contacts")).forEach(function(e){e.classList.remove("item_table-extended-contacts_hidden")}),Array.from(document.querySelectorAll(".js-item_gallery-extended-contacts")).forEach(function(e){e.classList.remove("item_gallery-extended-contacts_hidden")})}}]),t}(),S=n(113),L=function(){function a(e){var n=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};babelHelpers.classCallCheck(this,a),babelHelpers.defineProperty(this,"handleRecItemClick",function(e){var t=n.x;e.target.closest(".js-cvr-item-link")&&window.avito&&window.avito.cookie&&window.avito.cookie.set&&window.avito.cookie.set("tmpSearchBottomHash",t,3600)}),this.cvrContainerNode=e,this.categoryId=t.categoryId,this.itemIds=[],this.state={recommendationsShown:!1}}return babelHelpers.createClass(a,[{key:"init",value:function(){var v=this;fetch("/js/recommendations",{method:"post",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"},body:"categoryId=".concat(this.categoryId,"&limit=").concat(8)}).then(function(e){return e.json()}).then(function(e){var t=e.result,n=(t=void 0===t?{}:t).items,a=void 0===n?{}:n,i=t.engine,r=void 0===i?"":i,o=t.engineName,s=void 0===o?"":o,c=t.microCategoryId,l=void 0===c?0:c,d=t.categoryId,u=void 0===d?0:d,h=t.x,p=void 0===h?"":h;v.itemIds=Object.keys(a),v.iids=v.itemIds.map(function(e){return a[e].id}),v.engine=r,v.engineName=s,v.categoryId=u,v.microCategoryId=l,v.x=p,v.itemIds.length&&v.render(a)}).then(function(){if(v.itemIds.length){window.addEventListener("scroll",Object(c.i)(function(){return v.handlePageScroll()},200)),v.handlePageScroll();var e=document.querySelector(".js-cvr-items-container");e.addEventListener("click",v.handleRecItemClick),e.addEventListener("contextmenu",v.handleRecItemClick)}})}},{key:"getItemHTML",value:function(e){var t=e.title,n=e.category,a=null!==e.price?'<p class="cvr-item-price has-bold">'.concat(Object(S.currency)(e.price),' <span class="font_arial-rub">₽</span></p>'):"";return t=20<t.length?"".concat(t.slice(0,17),"..."):t,n=20<n.length?"".concat(n.slice(0,17),"..."):n,'\n            <div class="cvr-item js-cvr-item" data-id="'.concat(e.id,'">\n                <a href="').concat(e.url,'" class="cvr-item-img-wrapper-link js-cvr-item-img-wrapper-link js-cvr-item-link" target="_blank" rel="noopener noreferrer">\n                    <img class="cvr-item-img" src="').concat(e.image_url,'" alt="').concat(e.title,'" />\n                </a>\n                <a href="').concat(e.url,'" class="cvr-item-link js-cvr-item-link" target="_blank" rel="noopener noreferrer">').concat(t,'</a>\n                <p class="cvr-item-category">').concat(n,"</p>\n                ").concat(a,"\n            </div>\n        ")}},{key:"render",value:function(t){var n=this;this.cvrContainerNode.innerHTML='\n            <div class="cvr-title">Популярное</div>\n            <div class="cvr-items-container js-cvr-items-container">\n                '.concat(Object.keys(t).map(function(e){return n.getItemHTML(t[e])}).join(""),"\n            </div>\n        ")}},{key:"handlePageScroll",value:function(){if(!this.state.shown){var e=window.innerHeight;this.cvrContainerNode.getBoundingClientRect().top+200<e&&(this.state.shown=!0,this.logEvent())}}},{key:"logEvent",value:function(){var e=this.engine,t=this.engineName,n=this.categoryId,a=this.microCategoryId,i=this.x,r=this.iids;r.length&&Object(c.h)({eid:2309,version:2,items:this.itemIds.length||0,microcategoryid:a,srcp:"search_shop",position:1,engine_version:t,x:i,iids:r,engine:e,categoryId:n})}}]),a}(),_=n(6169);function x(){var e=window.location.pathname.split("/");if("s_onlayn_bronirovaniem"===e[e.length-1]){var t=function(){var e=new URLSearchParams(window.location.search),t={minDate:null,maxDate:null};if(!e.has("f"))return t;try{var n=e.get("f").split("_")[1].split("b");return{minDate:H(n[0]),maxDate:H(n[1])}}catch(e){return t}}(),n=t.minDate,a=t.maxDate;window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"listingView",city:e[1],hrental_startdate:n,hrental_enddate:a})}}function H(e){return"".concat(e.slice(0,4),"-").concat(e.slice(4,6),"-").concat(e.slice(6,8))}function q(){babelHelpers.classCallCheck(this,q),babelHelpers.defineProperty(this,"handleSendBannerDisplayEvent",function(){Object(E.a)({version:0,eid:3040})}),babelHelpers.defineProperty(this,"handleSendBannerClickEvent",function(){Object(E.a)({version:0,eid:3042})});var e=document.querySelector(".js-str-catalog-banner");e&&(this.handleSendBannerDisplayEvent(),e.addEventListener("click",this.handleSendBannerClickEvent))}var E=n(741),O=n(6071);n(2399);function T(){try{var e=document.querySelectorAll(".js-popular-categories-link");e&&e.forEach(function(e){return function(e){e.addEventListener("click",function(){Object(c.h)({version:1,eid:3020,search_correction_original:e.dataset.query,search_correction_method:e.dataset.method,page_number:0})})}(e)})}catch(e){}}function F(e,t){t.addEventListener("click",function(){Object(c.h)({version:0,eid:3302,empty_serp_link_type:e})})}Object(O.a)(),new _.a,document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".js-cvr-container");if(e)try{var t=JSON.parse(e.getAttribute("data-config"));new L(e,t).init()}catch(e){}function n(){if("function"==typeof $.fn.searchMap){var e=$(".b-search-map");e.searchMap({hasFullScreen:!0,priceDimensionValue:e.data("price-dimension")})}}var a=document.querySelector(".js-search-filters-wrapper");a&&(a.dataset.isFiltersMount?n():window.addEventListener("filtersMount",n)),x(),document.querySelector(".js-popular-categories")&&T(),function(){var i=$(".js-correction-link");if(i&&i.length)for(var e=function(e){var t=i[e],n=t.getAttribute("data-method"),a=t.getAttribute("data-original");t.addEventListener("click",function(){Object(c.h)({version:1,eid:3020,search_correction_original:a,search_correction_method:n,page_number:0})})},t=0;t<i.length;t++)e(t)}()}),$(function(){if(!window.avito.abFeatures.newReactButton){var t=new w,e=function(e){t.add(e)};n=$(document.body),o={breadcrumbs:{selector:".js-breadcrumbs",init:function(){var e=$(".js-sort-select");e&&e.length&&e.searchSortOrder&&e.searchSortOrder()}},catalogSerp:{parentSelector:".js-catalog_serp",init:function(){n.trigger("reset.lazy"),e(this.parentSelector)}},counts:{selector:".catalog-counts",init:function(){var e=$(this.selector).find(".catalog-counts__section[data-counter-idx]");e&&e.length&&e.catalogCountsIdx()}},pager:{selector:".js-pages"}},$.mediator.on("catalog.init_block",function(e,t){var n,a;if(t){var i=o[t.name],r=$.trim(t.html||"");if(i){if(i.parentSelector)n=$(i.parentSelector),a="html";else if(i.selector){if(!r)return;n=$(i.selector),a="replaceWith"}i.replace&&i.replace.apply(i),n[a](r),-1<[".catalog-counts",".js-breadcrumbs"].indexOf(i.selector)&&(n=$(i.selector)).each(function(e,t){var n=$(t);n.parent().hasClass("js-nav-content")||n.hide()}),i.init&&i.init.apply(i)}}}).on("catalog.clear_blocks",function(){Object.keys(o).forEach(function(e){var t=o[e],n=t.replace,a=t.parentSelector,i=t.selector;n&&n.apply(t);var r=document.querySelector(a||i);if(r)for(;r.firstChild;)r.removeChild(r.firstChild)})}),$.each(o,function(e,t){t.init&&t.init.apply(t)}),"function"==typeof $.fn.catalogCountsIdx&&$(".catalog-counts__section[data-counter-idx]").catalogCountsIdx(),document.addEventListener("single-page:updateCatalog",function(){e(".js-single-page")})}var n,o;new a,new q,function(){var e=document.querySelector(".js-nulus-drop-cat"),t=document.querySelector(".js-nulus-parent-loc"),n=document.querySelector(".js-nulus-empty-page");e&&F("dropCat",e);t&&F("parentLoc",t);n&&F("mainPage",n)}()})}}]);