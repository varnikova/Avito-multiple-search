(window.webpackJsonp=window.webpackJsonp||[]).push([["8bfb41bf"],{5957:function(e,t,r){"use strict";var i={};r.r(i),r.d(i,"common",function(){return Ye}),r.d(i,"cvs",function(){return tt}),r.d(i,"form",function(){return at}),r.d(i,"locations",function(){return ut}),r.d(i,"positions",function(){return ht}),r.d(i,"phones",function(){return gt});var P=r(35),R=r.n(P),n=r(38),a=r.n(n),o=r(43),S=r(6180),O=r(819),q=r(875),s=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){S.a.addNotification({timeout:15e3,props:{design:"warning",children:R.a.createElement(P.Fragment,null,R.a.createElement(q.a,{bold:!0},"У вас уже ",R.a.createElement("a",{href:"/profile"},"есть резюме")," — его можно дополнить.")," Чтобы сразу рассказать о себе работодателю, прикрепите резюме к сообщению в переписке.")}})}},{key:"render",value:function(){return R.a.createElement(S.a,{component:O.a})}}]),t}(P.PureComponent),l=r(6038),u=r(1327),c=r.n(u),d=r(6179);var p=r(45),h=r.n(p),b=r(6055),f=function(){function i(e){var t=e.server,r=e.seqId,n=e.token;babelHelpers.classCallCheck(this,i),this.server=t,this.seqId=r||1,this.odd=r%2,this.token=n}return babelHelpers.createClass(i,[{key:"request",value:function(e,t){return this.fetching({method:e,params:t})}},{key:"notify",value:function(e,t){return this.fetching({method:e,params:t},!0)}},{key:"fetching",value:function(e,t){var n=this,r=e.method,i=e.params,a=void 0===i?{}:i,o={jsonrpc:"2.0",method:r.replace(/\//g,"."),params:a};return t||(o.id=this.generateId(),o.uid=Date.now()+"-"+Math.random().toString(36).substring(0,10)),this.token&&(o.params.token=this.token),new Promise(function(r,t){fetch(n.server,{method:"post",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)}).then(function(e){if(200<=e.status&&e.status<300)return-1!==e.headers.get("content-type").indexOf("application/json")?e.json():e.text();var t=new Error(e.statusText);throw t.responseOriginal=e,t}).then(function(e){e.error||(n.checkToken(e.result),r(e.result));var t=new Error(e.statusText);throw t.response=e,t}).catch(function(e){e.responseOriginal?e.responseOriginal.json().then(function(e){n.checkToken(e.error.data),t(e.error)}).catch(function(){t({})}):e.response?t(e.response.error):t({})})})}},{key:"checkToken",value:function(e){var t=e.token;t&&(this.token=t)}},{key:"getTokenKey",value:function(e){return e.replace(/\D+/g,"")}},{key:"generateId",value:function(){var e=this.seqId;return this.seqId+=2,this.seqId>Number.MAX_SAFE_INTEGER&&(this.seqId=Number.MIN_SAFE_INTEGER+(this.odd?0:1)),e}},{key:"token",get:function(){return window.avito&&window.avito.token?babelHelpers.defineProperty({},this.getTokenKey(window.avito.token.name()),window.avito.token.val()):this.tokenKey&&this.tokenValue?babelHelpers.defineProperty({},this.tokenKey,this.tokenValue):null},set:function(e){if(e){var t=babelHelpers.slicedToArray(Object.entries(e)[0],2),r=t[0],n=t[1];window.avito&&window.avito.token&&window.avito.token.update(r,n),this.tokenKey=this.getTokenKey(r),this.tokenValue=n}}}]),i}(),m=new f({server:"/cv/simple/"}),g=new f({server:"/cv/phone-verify/"}),C="CV_REQUEST",k="CV_REQUEST_SUCCESS",E="CV_REQUEST_FAIL",v="CV_ACTIVATE_REQUEST",y="CV_ACTIVATE_REQUEST_SUCCESS",V="CV_ACTIVATE_REQUEST_FAIL",F="CV_CHECK",T="LOCATIONS_REQUEST",H="LOCATIONS_REQUEST_SUCCESS",w="LOCATIONS_REQUEST_FAIL",_="LOCATIONS_CHANGE",D="LOCATIONS_SET",I="POSITIONS_REQUEST",j="POSITIONS_REQUEST_SUCCESS",N="POSITIONS_REQUEST_FAIL",A="POSITIONS_CHANGE",L="POSITIONS_SET",M="FORM_SUBMIT_REQUEST",U="FORM_SUBMIT_REQUEST_SUCCESS",B="FORM_SUBMIT_REQUEST_FAIL",Q="FORM_VALIDATION_REQUEST",z="FORM_VALIDATION_REQUEST_SUCCESS",x="FORM_VALIDATION_REQUEST_FAIL",W="FORM_CHANGE",G="PHONE_VERIFY_REQUEST",J="PHONE_VERIFY_REQUEST_SUCCESS",K="PHONE_VERIFY_REQUEST_FAIL",Y="PHONE_CONFIRM_REQUEST",X="PHONE_CONFIRM_REQUEST_SUCCESS",$="PHONE_CONFIRM_REQUEST_FAIL",Z="PHONE_RESEND_CODE_REQUEST",ee="PHONE_RESEND_CODE_REQUEST_SUCCESS",te="PHONE_RESEND_CODE_REQUEST_FAIL",re="PHONE_CHANGE",ne="TOGGLE_HIDE_CV",ie="DISABLE_CV_REQUEST",ae="DISABLE_CV_REQUEST_SUCCESS",oe="DISABLE_CV_REQUEST_FAIL",se="title",le="phone",ue="email",ce="previousCompany",de="aboutMe",pe="address";function he(e){return{types:[G,J,K],fetching:g.request("requestCode",{phone:e})}}var be=r(927),fe=r(930),me=r(932),ge=r(866),Ce=r(865),Ee=r(922),ve=r(886),ye=r(112),Pe=r.n(ye),Se=r(2386),Oe=r.n(Se),Ve=function(e){function a(){var e,r;babelHelpers.classCallCheck(this,a);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(a)).call.apply(e,[this].concat(n))),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(r),"handleCVCheck",function(e){var t=e.value;r.props.onChange({id:t,checked:!0})}),r}return babelHelpers.inherits(a,e),babelHelpers.createClass(a,[{key:"render",value:function(){var o=this,e=this.props,t=e.cvs,r=e.onSubmit,s=e.isFetching,n=!t.some(function(e){return e.checked});return R.a.createElement("div",{className:Oe.a.root},R.a.createElement("ul",{className:Oe.a.list},t.map(function(e){var t=e.id,r=e.title,n=e.salary,i=e.updatedDate,a=e.checked;return R.a.createElement("li",{key:t,className:Oe.a.item},R.a.createElement(fe.a,{value:t,disabled:s,checked:a,onChange:o.handleCVCheck},R.a.createElement(q.a,{size:"s"},r," ",n&&R.a.createElement("span",null,", ",R.a.createElement(Ee.a,{value:n,type:"currency",precision:0}))),R.a.createElement("br",null),R.a.createElement(q.a,{size:"s",design:"noaccent"},"Изменено ",Object(ye.format)(i,"%d %mmmm %yyyy"))))})),R.a.createElement("div",{className:Oe.a.row},R.a.createElement(Ce.a,{size:"m",design:"primary",loading:s,disabled:n,onClick:r},"Активировать"),this.renderCheckbox(),this.renderDisableCVBtn()))}},{key:"renderDisableCVBtn",value:function(){var e=this.props,t=e.onDisableCV;return e.wasCVDisabledEarlier?null:R.a.createElement(Ce.a,{size:"m",type:"button",onClick:t},"Продолжить без резюме")}},{key:"renderCheckbox",value:function(){var e=this.props,t=e.hideCVEnabled,r=e.hideCV,n=e.onToggleHideCV;return t?R.a.createElement(ve.a,{checked:r,onChange:n},"Скрыть резюме от других работодателей"):null}}]),a}(P.PureComponent);babelHelpers.defineProperty(Ve,"propTypes",{cvs:h.a.arrayOf(h.a.shape({id:h.a.number,title:h.a.string,salary:h.a.string,updateDate:h.a.number,checked:h.a.bool})),isFetching:h.a.bool,hideCVEnabled:h.a.bool.isRequired,hideCV:h.a.bool.isRequired,wasCVDisabledEarlier:h.a.bool.isRequired,onChange:h.a.func.isRequired,onSubmit:h.a.func.isRequired,onToggleHideCV:h.a.func.isRequired,onDisableCV:h.a.func.isRequired});var Re=r(6095),qe=r(872),Fe=r(948),Te=r(912),He=r(907),we=r(2387),Ie=r.n(we),ke=function(e){function t(e){var n;return babelHelpers.classCallCheck(this,t),n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleBlurSuggest",function(){var e=n.props,t=e.data,r=e.locations;n.setState({locationError:!t[pe]&&r.query?"Введите корректный город":null,locationSuggestFocused:!1})}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleFocusLocationSuggest",function(){n.setState({locationSuggestFocused:!0})}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleBlurPositionSuggest",function(){var e=n.props.data;n.setState({positionError:e[se]?null:"Введите желаемую должность",positionSuggestFocused:!1})}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleFocusPositionSuggest",function(){n.setState({positionSuggestFocused:!0})}),n.state={locationError:null,positionError:null,locationSuggestFocused:null,positionSuggestFocused:null},n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentWillReceiveProps",value:function(e){e.data[pe]&&this.state.locationError&&this.setState({locationError:null}),e.data[se]&&this.state.positionError&&this.setState({positionError:null})}},{key:"render",value:function(){var e=this.props,t=e.data,r=e.errors,n=e.locations,i=e.autoFocusField,a=e.isFetching,o=e.isPhoneVerified,s=e.isEmailExist,l=e.previousCompanyEnabled,u=e.aboutMeEnabled,c=e.phoneVerificationError,d=e.onChange,p=e.onChangeLocation,h=e.onSelectLocation,b=e.onSubmit,f=this.state,m=f.locationError,g=f.positionError,C=f.locationSuggestFocused,E=!(t[pe]&&t[se]&&(t[le]&&!t[le].includes("_")||o)&&(t[ue]||s)&&(!l||t[ce])&&(!u||t[de]));return R.a.createElement(Re.a,{layout:"narrow",onSubmit:b},R.a.createElement(Re.a.Fieldset,{label:"Место проживания",error:r[pe]||m},R.a.createElement(He.a,{value:n.query,suggests:n.list,loading:n.isFetching,disabled:a,error:Boolean(r[pe])||Boolean(m),expanded:C&&Boolean(n.list.length&&!t[pe]),autoFocus:i===pe,onChange:p,onSelect:h,onFocus:this.handleFocusLocationSuggest,onBlur:this.handleBlurSuggest})),R.a.createElement(Re.a.Fieldset,{label:"Желаемая должность",error:r[se]||g},this.renderTitleInput()),this.renderAboutMe(),this.renderLastJob(),!o&&R.a.createElement(Re.a.Fieldset,{label:"Телефон",error:r[le]||c},R.a.createElement(Te.a,{name:le,value:t[le],mask:"phone",placeholder:"+7 ___ ___-__-__",disabled:a,error:Boolean(r[le])||Boolean(c),autoFocus:i===le,clearable:!0,onChange:d})),!s&&R.a.createElement(Re.a.Fieldset,{label:"Электронная почта",error:r[ue]},R.a.createElement(qe.a,{name:ue,value:t[ue],disabled:a,error:Boolean(r[ue]),autoFocus:i===ue,clearable:!0,onChange:d})),R.a.createElement(Re.a.Action,null,R.a.createElement("div",{className:Ie.a.row},R.a.createElement(Ce.a,{size:"m",design:"primary",loading:a,disabled:E},"Создать"),this.renderCheckbox(),this.renderDisableCVBtn())))}},{key:"renderDisableCVBtn",value:function(){var e=this.props,t=e.onDisableCV;return e.wasCVDisabledEarlier?null:R.a.createElement(Ce.a,{size:"m",type:"button",onClick:t},"Продолжить без резюме")}},{key:"renderTitleInput",value:function(){var e=this.props,t=e.data,r=e.errors,n=e.positions,i=e.autoFocusField,a=e.isFetching,o=e.suggestEnabled,s=e.onChange,l=e.onChangePosition,u=e.onSelectPosition,c=this.state,d=c.positionError,p=c.positionSuggestFocused;return o?R.a.createElement(He.a,{value:n.query,suggests:n.list,loading:n.isFetching,disabled:a,error:Boolean(r[se])||Boolean(d),expanded:p&&Boolean(n.list.length),autoFocus:i===se,onChange:l,onSelect:u,onFocus:this.handleFocusPositionSuggest,onBlur:this.handleBlurPositionSuggest}):R.a.createElement(qe.a,{name:se,value:t[se],disabled:a,error:Boolean(r[se]),autoFocus:i===se,clearable:!0,onChange:s})}},{key:"renderAboutMe",value:function(){var e=this.props,t=e.data,r=e.errors,n=e.autoFocusField,i=e.isFetching,a=e.aboutMeEnabled,o=e.onChange;return a?R.a.createElement(Re.a.Fieldset,{label:"О себе",error:r[de]},R.a.createElement(Fe.a,{name:de,placeholder:"Опишите свои деловые и профессиональные навыки. Расскажите о достижениях и чем вы можете быть полезны компании на этой должности",value:t[de],disabled:i,rows:3,error:Boolean(r[de]),autoFocus:n===[de],clearable:!0,onChange:o})):null}},{key:"renderLastJob",value:function(){var e=this.props,t=e.data,r=e.errors,n=e.autoFocusField,i=e.isFetching,a=e.previousCompanyEnabled,o=e.onChange;return a?R.a.createElement(Re.a.Fieldset,{label:"Предыдущее место работы",error:r[ce]},R.a.createElement(qe.a,{name:ce,value:t[ce],disabled:i,error:Boolean(r[ce]),autoFocus:n===ce,clearable:!0,onChange:o})):null}},{key:"renderCheckbox",value:function(){var e=this.props,t=e.hideCVEnabled,r=e.hideCV,n=e.onToggleHideCV;return t?R.a.createElement(ve.a,{checked:r,onChange:n},"Скрыть резюме от других работодателей"):null}}]),t}(P.PureComponent);babelHelpers.defineProperty(ke,"propTypes",{data:h.a.object,errors:h.a.object,locations:h.a.object.isRequired,positions:h.a.object.isRequired,autoFocusField:h.a.string,isEmailExist:h.a.bool,suggestEnabled:h.a.bool,isPhoneVerified:h.a.bool.isRequired,phoneVerificationError:h.a.string,isFetching:h.a.bool.isRequired,aboutMeEnabled:h.a.bool.isRequired,previousCompanyEnabled:h.a.bool.isRequired,hideCVEnabled:h.a.bool.isRequired,hideCV:h.a.bool.isRequired,wasCVDisabledEarlier:h.a.bool.isRequired,onChangeLocation:h.a.func.isRequired,onSelectLocation:h.a.func.isRequired,onChangePosition:h.a.func.isRequired,onSelectPosition:h.a.func.isRequired,onChange:h.a.func.isRequired,onSubmit:h.a.func.isRequired,onToggleHideCV:h.a.func.isRequired,onDisableCV:h.a.func.isRequired});var _e=r(900),De=r(881),je=r(905),Ne=r(2388),Ae=r.n(Ne),Le=function(e){function t(e){var i;return babelHelpers.classCallCheck(this,t),i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(i),"handlePhoneCodeChange",function(e){var t=e.value;i.setState({code:t,showCodeError:!1})}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(i),"handleSubmitCode",function(){var e=i.props,t=e.onConfirmPhoneCode,r=e.phone,n=i.state.code;n&&t({phone:r,code:n})}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(i),"handleClickResend",function(e){e.event.preventDefault();var t=i.props,r=t.onResendCode,n=t.phone;t.isConfirming||(r(n),i.setState({code:""}))}),i.timerId=null,i.state={code:"",showCodeError:!1,timerValue:0},i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){var e=this.props.timeout;this.setState({showCodeError:!1,timerValue:0}),e&&this.startTimer(e)}},{key:"componentWillReceiveProps",value:function(e){var t=this,r=e.confirmError,n=e.resendingError,i=e.timeout;this.clearTimer();var a={showCodeError:Boolean(r)||Boolean(n)};this.setState(a,function(){i?t.startTimer(i):t.clearTimer()})}},{key:"componentWillUnmount",value:function(){this.clearTimer()}},{key:"render",value:function(){return R.a.createElement(Re.a,{title:"Подтверждение номера",layout:_e.b,description:this.renderPhoneMessage(),onSubmit:this.handleSubmitCode},this.renderInput(),this.renderButton())}},{key:"renderPhoneMessage",value:function(){var e=this.props,t=e.phone,r=e.verificationError;return R.a.createElement("span",null,R.a.createElement("span",{className:Ae.a.phone},R.a.createElement(q.a,{size:"l"},t)),r?R.a.createElement(q.a,null,R.a.createElement("span",{className:Ae.a.error},r)):R.a.createElement(q.a,null,"В течение 2 минут вы получите смс с кодом для подтверждения номера телефона."))}},{key:"renderInput",value:function(){var e=this.state,t=e.code,r=e.showCodeError,n=this.props,i=n.isConfirming,a=n.isConfirmed,o=n.verificationError,s=n.confirmError,l=n.resendingError,u=this.getTimerCaption();return o?null:R.a.createElement(Re.a.Fieldset,{error:r?s||l:"",hint:u},R.a.createElement(qe.a,{size:"m",disabled:i||a,error:Boolean(r),value:t,maxLength:8,autoFocus:!0,placeholder:"Код подтверждения",onChange:this.handlePhoneCodeChange}))}},{key:"renderLinkOfResendingCode",value:function(){var e=this.props.isResending;return R.a.createElement(De.a,{disabled:e,onClick:this.handleClickResend},"Получить новый код")}},{key:"renderButton",value:function(){var e=this.props,t=e.isConfirming,r=e.isConfirmed,n=e.onChangePhone,i=e.verificationError,a=this.state.code,o=a.length<5||!/^\d+$/.test(a)||this.state.showCodeError;return i?R.a.createElement(Re.a.Action,null,R.a.createElement(je.a,{spaced:!0},R.a.createElement(Ce.a,{size:"m",type:"button",design:"primary",onClick:n},"Изменить номер"))):R.a.createElement(Re.a.Action,null,R.a.createElement(je.a,{spaced:!0},R.a.createElement(Ce.a,{size:"m",disabled:o,loading:t||r,type:"button",design:"primary",onClick:this.handleSubmitCode},"Подтвердить"),R.a.createElement(Ce.a,{size:"m",type:"button",disabled:t||r,onClick:n},"Изменить номер")))}},{key:"getTimerCaption",value:function(){var e=this.props,t=e.isConfirming,r=e.isConfirmed,n=this.state.timerValue;if(t||r)return R.a.createElement("div",{className:Ae.a["empty-line"]});if(n<1)return this.renderLinkOfResendingCode();var i=new Date;i.setHours(0),i.setMinutes(0),i.setSeconds(n);var a=360<n?"%HH:%MM:%ss":"%MM:%ss";return"Получить новый код можно через "+Pe.a.format(i.getTime(),a)}},{key:"startTimer",value:function(e){var t=this;this.setState({timerValue:e}),this.timerId&&this.clearTimer(),this.timerId=setInterval(function(){var e=t.state.timerValue;0<e?t.setState({timerValue:e-1}):t.clearTimer()},1e3)}},{key:"clearTimer",value:function(){clearInterval(this.timerId),this.timerId=null,this.setState({timerValue:0})}}]),t}(P.PureComponent);babelHelpers.defineProperty(Le,"propTypes",{phone:h.a.string.isRequired,timeout:h.a.number,isConfirming:h.a.bool.isRequired,isConfirmed:h.a.bool.isRequired,isResending:h.a.bool.isRequired,verificationError:h.a.string,resendingError:h.a.string,confirmError:h.a.string,onChangePhone:h.a.func.isRequired,onConfirmPhoneCode:h.a.func.isRequired,onResendCode:h.a.func.isRequired});var Me=r(2389),Ue=r.n(Me),Be=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(r),"handleChangePhone",function(){r.setState({focusField:"phone"}),r.props.onChangePhone()}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(r),"handleChangeActiveTab",function(e){var t=e.value;r.setState({activeTab:t,focusField:r.getFocusField(r.props.form.data)})}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(r),"handleNewCVSubmit",function(e){e.preventDefault(),r.props.onNewCVSubmit()}),r.state={activeTab:"new",focusField:null},r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentWillReceiveProps",value:function(e){e.isInit!==this.props.isInit&&this.setState({focusField:this.getFocusField(e.form.data)})}},{key:"render",value:function(){var e=this.props.onClose;return R.a.createElement(be.a,{responsive:!1,scrolling:"outside",onClose:e},this.renderContent())}},{key:"renderContent",value:function(){var e=this.props,t=e.isInit,r=e.isError;return t?R.a.createElement("div",{className:Ue.a.loader},R.a.createElement(ge.a,null)):r?R.a.createElement("div",null,R.a.createElement("div",{className:Ue.a.row},R.a.createElement(q.a,{tagName:"h3",size:"xl"},"Что-то пошло не так")),R.a.createElement(q.a,{tagName:"p"},"Пожалуйста, попробуйте ещё раз позднее")):R.a.createElement("div",null,this.renderPhoneVeritication(),this.renderForm())}},{key:"renderPhoneVeritication",value:function(){var e=this.props,t=e.form,r=e.phones,n=e.onConfirmPhoneCode,i=e.onResendPhoneCode;return r.isVerified?R.a.createElement("div",null,R.a.createElement(Le,babelHelpers.extends({},r,{phone:t.data.phone,onChangePhone:this.handleChangePhone,onConfirmPhoneCode:n,onResendCode:i}))):null}},{key:"renderForm",value:function(){var e=this.props,t=e.cvs,r=e.form,n=e.locations,i=e.positions,a=e.phones,o=e.isEmailExist,s=e.suggestEnabled,l=e.isFetching,u=e.aboutMeEnabled,c=e.previousCompanyEnabled,d=e.hideCVEnabled,p=e.hideCV,h=e.wasCVDisabledEarlier,b=e.onChangeLocation,f=e.onSelectLocation,m=e.onChangePosition,g=e.onSelectPosition,C=e.onActivateCVs,E=e.onCheckCV,v=e.onChangeCVForm,y=e.onToggleHideCV,P=e.onDisableCV,S=this.state,O=S.activeTab,V=S.focusField;return a.isVerified?null:R.a.createElement("div",null,R.a.createElement("div",{className:Ue.a.row},R.a.createElement(q.a,{tagName:"h3",size:"xl"},"Создайте резюме")),R.a.createElement("div",{className:Ue.a.row},R.a.createElement(q.a,{tagName:"p",size:"s"},R.a.createElement("span",null,"Резюме будет видно всем работодателям, и они смогут с вами связаться. Вы также сможете дополнить его и приложить к отклику на интересную вакансию."))),t.length?R.a.createElement("div",{className:Ue.a.row_both_margins},R.a.createElement(me.a,{value:O,design:"buttons",onChange:this.handleChangeActiveTab},R.a.createElement(fe.a,{value:"new",disabled:l},"Создать новое"),R.a.createElement(fe.a,{value:"old",disabled:l},"Активировать старое"))):null,"old"===O?R.a.createElement(Ve,{cvs:t,isFetching:l,hideCV:p,hideCVEnabled:d,wasCVDisabledEarlier:h,onChange:E,onSubmit:C,onToggleHideCV:y,onDisableCV:P}):R.a.createElement(ke,{data:r.data,errors:r.errors,locations:n,positions:i,autoFocusField:V,phoneVerificationError:a.verificationError,aboutMeEnabled:u,previousCompanyEnabled:c,isPhoneVerified:a.hasVerifiedPhone,isEmailExist:o,suggestEnabled:s,isFetching:l||a.isVerifying,hideCV:p,wasCVDisabledEarlier:h,hideCVEnabled:d,onChangeLocation:b,onSelectLocation:f,onChangePosition:m,onSelectPosition:g,onChange:v,onSubmit:this.handleNewCVSubmit,onToggleHideCV:y,onDisableCV:P}))}},{key:"getFocusField",value:function(t){return["address","title","phone","email"].find(function(e){return!t[e]})||null}}]),t}(P.PureComponent);function Qe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function ze(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qe(r,!0).forEach(function(e){babelHelpers.defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qe(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}babelHelpers.defineProperty(Be,"propTypes",{cvs:h.a.arrayOf(h.a.shape({id:h.a.number,title:h.a.string})),form:h.a.object,locations:h.a.object.isRequired,positions:h.a.object.isRequired,phones:h.a.object.isRequired,isEmailExist:h.a.bool,suggestEnabled:h.a.bool,isInit:h.a.bool.isRequired,isFetching:h.a.bool.isRequired,isError:h.a.bool.isRequired,aboutMeEnabled:h.a.bool.isRequired,previousCompanyEnabled:h.a.bool.isRequired,hideCVEnabled:h.a.bool.isRequired,hideCV:h.a.bool.isRequired,wasCVDisabledEarlier:h.a.bool.isRequired,onChangeLocation:h.a.func.isRequired,onSelectLocation:h.a.func.isRequired,onChangePosition:h.a.func.isRequired,onSelectPosition:h.a.func.isRequired,onActivateCVs:h.a.func.isRequired,onCheckCV:h.a.func.isRequired,onChangeCVForm:h.a.func.isRequired,onNewCVSubmit:h.a.func.isRequired,onClose:h.a.func.isRequired,onChangePhone:h.a.func.isRequired,onConfirmPhoneCode:h.a.func.isRequired,onResendPhoneCode:h.a.func.isRequired,onToggleHideCV:h.a.func.isRequired,onDisableCV:h.a.func.isRequired});var xe=function(e){function t(e){var o;return babelHelpers.classCallCheck(this,t),o=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(o),"handleChangeLocationQuery",function(e){var t=e.value;o.props.changeLocationQuery(t),!o.props.locationsCache.some(function(e){return e.query===t})&&2<=t.length&&o.getLocationsByName(t)}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(o),"handleSelectLocation",function(e){var t=e.content,r=e.postfix,n=e.latitude,i=e.longitude,a="".concat(r?r+", ":"").concat(t);o.props.setLocation({address:a,latitude:n,longitude:i})}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(o),"handleChangePositionQuery",function(e){var t=e.value;o.props.changePositionQuery(t),!o.props.positionsCache.some(function(e){return e.query===t})&&2<=t.length&&o.getPositionsByName(t)}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(o),"handleSelectPosition",function(e){var t=e.content;o.props.setPosition({title:t})}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(o),"handleResendPhoneCode",function(e){o.props.resendPhoneCode(e)}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(o),"handleNewCVSubmit",function(){var e=o.props,t=e.form.data,r=e.itemId,n=e.hideCV;(0,e.submitForm)(ze({},t,{sourceId:r,hideCV:n}))}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(o),"handleActivateCV",function(){var e=o.props,t=e.activateCVs,r=e.cvs,n=e.hideCV;t(r.find(function(e){return e.checked}).id,n)}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(o),"handleToggleHideCV",function(e){var t=e.checked;o.props.toggleHideCV(t)}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(o),"handleDisableCV",function(){var e=o.props,t=e.itemId;(0,e.disableCV)({itemId:t})}),o.state={showPopup:!0},o.props.getCVS({itemId:e.itemId}),o.getLocationsByName=Object(b.a)(o.props.getLocationsByName,300),o.getPositionsByName=Object(b.a)(o.props.getPositionsByName,300),o}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentWillReceiveProps",value:function(e){e.phones.isConfirmed&&e.phones.isConfirmed!==this.props.phones.isConfirmed&&this.props.submitForm(ze({},e.form.data,{sourceId:e.itemId}))}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.isCvsSubmitted,n=t.isFormSubmitted,i=t.hideCV,a=t.CVDisabled,o=t.onClose;a&&o({success:!0});var s=r||n;if(s&&s!==(e.isCvsSubmitted||e.isFormSubmitted)){var l={NEW_AND_FOR_ALL:R.a.createElement(P.Fragment,null,R.a.createElement("strong",null,"Резюме опубликовано и видно всем работодателям.")," Отредактировать или скрыть его можно в «Моих объявлениях»"),NEW_AND_FOR_SOME:R.a.createElement(P.Fragment,null,R.a.createElement("strong",null,"Резюме опубликовано и видно работодателям, на вакансии которых вы откликнулись.")," Отредактировать его можно в «Моих объявлениях»"),ACTIVATED_AND_FOR_ALL:R.a.createElement(P.Fragment,null,R.a.createElement("strong",null,"Резюме снова активно и видно всем работодателям")),ACTIVATED_AND_FOR_SOME:R.a.createElement(P.Fragment,null,R.a.createElement("strong",null,"Резюме снова активно и видно работодателям, на вакансии которых вы откликнулись"))};S.a.addNotification({timeout:5e3,props:{design:"success",inverse:!0,children:r||i?!r&&i?l.NEW_AND_FOR_SOME:r&&!i?l.ACTIVATED_AND_FOR_ALL:r&&i?l.ACTIVATED_AND_FOR_SOME:"":l.NEW_AND_FOR_ALL}}),this.setState({showPopup:!1}),setTimeout(function(){o({success:!0})},6e3),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"gtm.generalEvent",eventCategory:"goal",eventAction:"contact",eventLabel:"resume"})}}},{key:"render",value:function(){var e=this.props,t=e.cvs,r=e.form,n=e.phones,i=e.locations,a=e.positions,o=e.isEmailExist,s=e.suggestEnabled,l=e.isInit,u=e.isFetching,c=e.isError,d=e.aboutMeEnabled,p=e.previousCompanyEnabled,h=e.hideCVEnabled,b=e.hideCV,f=e.wasCVDisabledEarlier,m=e.onClose,g=e.changeForm,C=e.checkCV,E=e.confirmPhoneCode,v=e.changePhone,y=this.state.showPopup;return R.a.createElement(P.Fragment,null,y?R.a.createElement(Be,{cvs:t,form:r,locations:i,positions:a,phones:n,isInit:l,isFetching:u,isError:c,isEmailExist:o,aboutMeEnabled:d,previousCompanyEnabled:p,suggestEnabled:s,hideCVEnabled:h,hideCV:b,wasCVDisabledEarlier:f,onActivateCVs:this.handleActivateCV,onCheckCV:C,onChangeLocation:this.handleChangeLocationQuery,onSelectLocation:this.handleSelectLocation,onChangePosition:this.handleChangePositionQuery,onSelectPosition:this.handleSelectPosition,onChangeCVForm:g,onConfirmPhoneCode:E,onChangePhone:v,onNewCVSubmit:this.handleNewCVSubmit,onResendPhoneCode:this.handleResendPhoneCode,onClose:m,onToggleHideCV:this.handleToggleHideCV,onDisableCV:this.handleDisableCV}):null,R.a.createElement(S.a,{component:O.a}))}}]),t}(P.PureComponent);babelHelpers.defineProperty(xe,"propTypes",{itemId:h.a.number.isRequired,cvs:h.a.arrayOf(h.a.shape({id:h.a.number,salary:h.a.string,status:h.a.number,title:h.a.string,updatedDate:h.a.number})),form:h.a.object,phones:h.a.object.isRequired,locations:h.a.object,locationsCache:h.a.array,positions:h.a.object,positionsCache:h.a.array,isEmailExist:h.a.bool,suggestEnabled:h.a.bool,isInit:h.a.bool.isRequired,isFetching:h.a.bool.isRequired,isCvsSubmitted:h.a.bool.isRequired,isFormSubmitted:h.a.bool.isRequired,isError:h.a.bool.isRequired,aboutMeEnabled:h.a.bool.isRequired,previousCompanyEnabled:h.a.bool.isRequired,hideCVEnabled:h.a.bool.isRequired,hideCV:h.a.bool.isRequired,CVDisabled:h.a.bool.isRequired,wasCVDisabledEarlier:h.a.bool.isRequired,getCVS:h.a.func.isRequired,checkCV:h.a.func.isRequired,activateCVs:h.a.func.isRequired,setLocation:h.a.func.isRequired,getLocationsByName:h.a.func.isRequired,changeLocationQuery:h.a.func.isRequired,setPosition:h.a.func.isRequired,getPositionsByName:h.a.func.isRequired,changePositionQuery:h.a.func.isRequired,changeForm:h.a.func.isRequired,submitForm:h.a.func.isRequired,onClose:h.a.func.isRequired,changePhone:h.a.func.isRequired,confirmPhoneCode:h.a.func.isRequired,resendPhoneCode:h.a.func.isRequired,toggleHideCV:h.a.func.isRequired,disableCV:h.a.func.isRequired});var We=Object(o.connect)(function(e){var t=e.common,r=e.cvs,n=e.form,i=e.locations,a=e.positions,o=e.phones;return{cvs:babelHelpers.toConsumableArray(r.list),isInit:r.isInit,isFetching:r.isFetching||n.isFetching,isCvsSubmitted:r.isSubmited,isFormSubmitted:n.isSubmited,isError:r.isError||n.isError,form:{data:n.data,errors:n.errors},isEmailExist:n.isEmailExist,suggestEnabled:n.suggestEnabled,aboutMeEnabled:n.aboutMeEnabled,previousCompanyEnabled:n.previousCompanyEnabled,hideCVEnabled:n.hideCVEnabled,hideCV:t.hideCV,wasCVDisabledEarlier:n.wasCVDisabledEarlier,CVDisabled:t.CVDisabled,locations:i.suggests.find(function(e){return e.query===i.query})||{query:i.query,isFetching:!1,list:[]},locationsCache:i.suggests,positions:a.suggests.find(function(e){return e.query===a.query})||{query:a.query,isFetching:!1,list:[]},positionsCache:a.suggests,phones:o}},{getCVS:function(e){var t=e.itemId;return{types:[C,k,E],fetching:m.request("init",{itemId:t})}},checkCV:function(e){var t=e.id;return{type:F,id:Number(t)}},activateCVs:function(e,t){return{types:[v,y,V],fetching:m.request("activate",{itemId:e,hideCV:t})}},setLocation:function(e){var t=e.address,r=e.latitude,n=e.longitude;return{type:D,address:t,latitude:r,longitude:n}},getLocationsByName:function(e){return{types:[T,H,w],fetching:fetch("/suggest/address",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})}).then(function(e){return e.ok?e.json():Promise.reject()}),query:e}},changeLocationQuery:function(e){return{type:_,query:e}},setPosition:function(e){var t=e.title;return{type:L,title:t}},getPositionsByName:function(e){return{types:[I,j,N],fetching:fetch("/suggest/jobposition",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({q:e})}).then(function(e){return e.ok?e.json():Promise.reject()}),query:e}},changePositionQuery:function(e){return{type:A,query:e}},changeForm:function(e){var t=e.name,r=e.value;return{type:W,name:t,value:r}},submitForm:function(a){return function(t,e){var r=e(),n=r.phones,i=r.form.isEmailExist;n.hasVerifiedPhone?t(function(e){return{types:[M,U,B],fetching:m.request("create",e)}}(a)):i?t(he(a.phone)):(t({type:Q}),m.request("validate",a).then(function(){t({type:z}),t(he(a.phone))}).catch(function(e){t({type:x,error:e})}))}},confirmPhoneCode:function(e){var t=e.phone,r=e.code;return{types:[Y,X,$],fetching:g.request("confirmCode",{phone:t,code:r})}},resendPhoneCode:function(e){return{types:[Z,ee,te],fetching:g.request("requestCode",{phone:e})}},changePhone:function(){return{type:re}},toggleHideCV:function(e){return{type:ne,data:e}},disableCV:function(e){var t=e.itemId;return{types:[ie,ae,oe],fetching:m.request("disable",{itemId:t})}}})(xe);function Ge(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Je(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ge(r,!0).forEach(function(e){babelHelpers.defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ge(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var Ke={hideCV:!1,CVDisabled:!1},Ye=function(e,t){var r=0<arguments.length&&void 0!==e?e:Ke,n=1<arguments.length?t:void 0;switch(n.type){case ne:return Je({},r,{hideCV:n.data});case ae:return Je({},r,{CVDisabled:n.response.success});default:return r}};function Xe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function $e(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Xe(r,!0).forEach(function(e){babelHelpers.defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xe(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var Ze,et={list:[],isInit:!0,isFetching:!1,isError:!1,isSubmited:!1},tt=function(e,t){var r=0<arguments.length&&void 0!==e?e:et,n=1<arguments.length?t:void 0;switch(n.type){case C:return $e({},r,{isInit:!0});case k:return $e({},r,{list:n.response.cvs.map(function(e){return $e({checked:!1},e)})||[],isInit:!1,isError:!1});case E:return $e({},r,{list:[],isInit:!1,isError:!1});case v:return $e({},r,{isFetching:!0});case y:return $e({},r,{isFetching:!1,isSubmited:!0});case V:return $e({},r,{isFetching:!1,isError:!0});case F:return $e({},r,{list:r.list.map(function(e){return $e({},e,{checked:e.id===n.id})})});default:return r}};function rt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function nt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rt(r,!0).forEach(function(e){babelHelpers.defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rt(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var it={data:(Ze={latitude:null,longitude:null,address:null,locationId:null,title:"",phone:""},babelHelpers.defineProperty(Ze,ce,""),babelHelpers.defineProperty(Ze,de,""),Ze),errors:{},isEmailExist:!1,isFetching:!1,isSubmited:!1,isError:!1,wasCVDisabledEarlier:!1,suggestEnabled:!1,hideCVEnabled:!1,aboutMeEnabled:!1,previousCompanyEnabled:!1},at=function(e,t){var r=0<arguments.length&&void 0!==e?e:it,n=1<arguments.length?t:void 0;switch(n.type){case z:return nt({},r,{isFetching:!1,errors:{}});case Q:case M:return nt({},r,{errors:{},isFetching:!0});case U:return nt({},r,{errors:{},isFetching:!1,isSubmited:n.response.success});case x:case B:var i=n.error.data.errors,a=void 0===i?{}:i;return nt({},r,{errors:nt({},a),isFetching:!1,isError:!Object.keys(a).length});case k:var o=n.response,s=o.city,l=void 0===s?{}:s,u=o.phones,c=void 0===u?[]:u,d=o.vacancy,p=void 0===d?{}:d,h=o.isEmailExist,b=o.suggestEnabled,f=o.hideCVEnabled,m=o.aboutMeEnabled,g=o.previousCompanyEnabled,C=o.isCvDisabled,E=l.address,v=void 0===E?null:E,y=l.locationId,P=void 0===y?null:y,S=p.title,O=void 0===S?null:S,V=c.find(function(e){return!e.verified})||{};return nt({},r,{isEmailExist:h,aboutMeEnabled:m,previousCompanyEnabled:g,suggestEnabled:b,hideCVEnabled:f,wasCVDisabledEarlier:C,data:nt({},r.data,{title:O,address:v,locationId:P,phone:V.number?V.number.replace(/^8/,"+7"):""})});case D:var R=n.latitude,q=n.longitude,F=n.address;return nt({},r,{data:nt({},r.data,{latitude:R,longitude:q,address:F})});case _:return nt({},r,{data:nt({},r.data,{address:null,locationId:null})});case L:var T=n.title;return nt({},r,{data:nt({},r.data,{title:T})});case A:var H=n.query;return nt({},r,{data:nt({},r.data,{title:H})});case W:var w=n.name,I=n.value;return nt({},r,{data:nt({},r.data,babelHelpers.defineProperty({},w,I))});default:return r}};function ot(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function st(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ot(r,!0).forEach(function(e){babelHelpers.defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ot(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var lt={query:"",suggests:[]};function ut(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:lt,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case T:var r=t.query;return st({},e,{suggests:[].concat(babelHelpers.toConsumableArray(e.suggests),[{query:r,isFetching:!0,list:[]}])});case w:var n=t.query;return st({},e,{suggests:e.suggests.filter(function(e){return e.query!==n})});case H:var i=t.query,a=t.response,o=void 0===a?[]:a;return st({},e,{suggests:e.suggests.map(function(e){return e.query===i?st({},e,{isFetching:!1,list:o.map(function(e){return{content:e.title,postfix:e.subtitle,latitude:e.latitude,longitude:e.longitude}})}):e})});case D:return st({},e,{query:t.address});case _:return st({},e,{query:t.query});case k:return st({},e,{query:t.response.city.address});default:return e}}function ct(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function dt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ct(r,!0).forEach(function(e){babelHelpers.defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ct(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var pt={query:"",suggests:[]};function ht(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:pt,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case I:var r=t.query;return dt({},e,{suggests:[].concat(babelHelpers.toConsumableArray(e.suggests),[{query:r,isFetching:!0,list:[]}])});case N:var n=t.query;return dt({},e,{suggests:e.suggests.filter(function(e){return e.query!==n})});case j:var i=t.query,a=t.response,o=void 0===a?[]:a;return dt({},e,{suggests:e.suggests.map(function(e){return e.query===i?dt({},e,{isFetching:!1,list:o.map(function(e){return{content:e.title}})}):e})});case L:return dt({},e,{query:t.title});case A:return dt({},e,{query:t.query});default:return e}}function bt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function ft(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?bt(r,!0).forEach(function(e){babelHelpers.defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bt(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var mt={list:[],hasVerifiedPhone:!1,timeout:0,isVerifying:!1,isResending:!1,isVerified:!1,isConfirming:!1,isConfirmed:!1,verificationError:null,resendingError:null,confirmError:null},gt=function(e,t){var r=0<arguments.length&&void 0!==e?e:mt,n=1<arguments.length?t:void 0;switch(n.type){case k:var i=n.response.phones,a=void 0===i?[]:i;return ft({},r,{list:a,hasVerifiedPhone:a.some(function(e){return e.verified})});case G:return ft({},r,{isVerifying:!0,isVerified:!1});case J:return ft({},r,{timeout:n.response.time,isVerifying:!1,isVerified:!0,verificationError:null});case K:var o=n.error,s=o.data,l=void 0===s?{}:s,u=o.message;return ft({},r,{isVerifying:!1,isVerified:!1,verificationError:l&&l.phone||u});case Y:return ft({},r,{isConfirming:!0});case X:return ft({},r,{hasVerifiedPhone:!0,isConfirming:!1,isConfirmed:!0});case $:var c=n.error,d=c.data,p=void 0===d?{}:d,h=c.message;return ft({},r,{timeout:0,isConfirming:!1,confirmError:p&&p.code||h});case Z:return ft({},r,{isResending:!0,verificationError:null,resendingError:null,confirmError:null});case ee:return ft({},r,{timeout:n.response.time,isResending:!1});case te:var b=n.error,f=b.data,m=void 0===f?{}:f,g=b.message;return ft({},r,{isResending:!1,resendingError:m&&m.code||g});case re:return ft({},r,{isVerified:!1,verificationError:null,confirmError:null});default:return r}};r.d(t,"a",function(){return Ct});var Ct=function(){function n(e){var r=this,t=e.itemId;babelHelpers.classCallCheck(this,n),babelHelpers.defineProperty(this,"handleClose",function(e){var t=e.success;a.a.unmountComponentAtNode(r.node),r.component=null,r.store=null,r.next&&r.next({success:t})}),this.itemId=t,this.hasAvailableCVs=null,this.node=document.createElement("div"),document.body.append(this.node)}return babelHelpers.createClass(n,[{key:"mount",value:function(){this.store=function(e){return Object(l.createStore)(Object(l.combineReducers)(e),Object(l.compose)(Object(l.applyMiddleware)(c.a,d.a),function(e){return e}))}(i),this.component=a.a.render(R.a.createElement(o.Provider,{store:this.store},R.a.createElement(We,{itemId:this.itemId,onClose:this.handleClose})),this.node)}},{key:"show",value:function(e){this.component||this.mount(),this.next=e}},{key:"showNotificationInsteadOfCv",value:function(){this.component=a.a.render(R.a.createElement(s,null),this.node)}},{key:"checkAvailabelCVs",value:function(){var r=this;return null!==this.hasAvailableCVs?Promise[this.hasAvailableCVs?"resolve":"reject"]():m.request("verifyUsersCVs").then(function(e){var t=e.hasAvailable;return r.hasAvailableCVs=t,Promise[t?"resolve":"reject"]()},function(){return Promise.resolve()})}}]),n}()}}]);