!function(s){function e(e){for(var t,n,r=e[0],o=e[1],a=e[2],i=0,c=[];i<r.length;i++)n=r[i],d[n]&&c.push(d[n][0]),d[n]=0;for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(s[t]=o[t]);for(p&&p(e);c.length;)c.shift()();return l.push.apply(l,a||[]),u()}function u(){for(var e,t=0;t<l.length;t++){for(var n=l[t],r=!0,o=1;o<n.length;o++){var a=n[o];0!==d[a]&&(r=!1)}r&&(l.splice(t--,1),e=f(f.s=n[0]))}return e}var n={},d={bc15d106:0},l=[];function f(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return s[e].call(t.exports,t,t.exports,f),t.l=!0,t.exports}f.e=function(o){var e=[],n=d[o];if(0!==n)if(n)e.push(n[2]);else{var t=new Promise(function(e,t){n=d[o]=[e,t]});e.push(n[2]=t);var r,a=document.createElement("script");a.charset="utf-8",a.timeout=120,f.nc&&a.setAttribute("nonce",f.nc),a.src=function(e){return f.p+"chunks/"+{"30f77923":"c3789eac79e952ecc968"}[e]+".js"}(o);var i=new Error;r=function(e){a.onerror=a.onload=null,clearTimeout(c);var t=d[o];if(0!==t){if(t){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;i.message="Loading chunk "+o+" failed.\n("+n+": "+r+")",i.name="ChunkLoadError",i.type=n,i.request=r,t[1](i)}d[o]=void 0}};var c=setTimeout(function(){r({type:"timeout",target:a})},12e4);a.onerror=a.onload=r,document.head.appendChild(a)}return Promise.all(e)},f.m=s,f.c=n,f.d=function(e,t,n){f.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},f.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},f.t=function(t,e){if(1&e&&(t=f(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(f.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)f.d(n,r,function(e){return t[e]}.bind(null,r));return n},f.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return f.d(t,"a",t),t},f.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},f.p="https://static.avito.ru/s/cc/",f.oe=function(e){throw console.error(e),e};var t=window.webpackJsonp=window.webpackJsonp||[],r=t.push.bind(t);t.push=e,t=t.slice();for(var o=0;o<t.length;o++)e(t[o]);var p=r;l.push([2370,"96e8cded","4d6c8f22"]),u()}({2370:function(e,t,n){e.exports=n(5956)},2371:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o});var r=function(){},o=function(){return window.IntersectionObserver&&window.IntersectionObserverEntry&&"intersectionRatio"in window.IntersectionObserverEntry.prototype}},2372:function(e,t,n){"use strict";n.d(t,"c",function(){return l}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});function s(){return performance.now()/1e3}var u=n(741),d=n(2371),l={REQUEST:"r",PASSBACK:"p"},r={POSITION_NOT_EXIST:1e3,CONTAINER_NOT_EXIST:1001,POSITION_FULLY_REJECTED:1002},f=window.avito&&window.avito.rmp&&window.avito.rmp.enableEventSampling,o={logBannerClick:function(e,t){var n=t.item.parameters,r={eid:3215,version:14,banner_code:e,cdtm:s(),alid:n.alid,adslot:n.log_id,pagetype:window.avito.pageId,rcid:window.avito.categoryId};Object(u.a)(r).catch(d.b)},logAdRequest:function(e,t,n,r){if(f){var o=function(e){switch(e){case l.PASSBACK:return[0,3969];case l.REQUEST:default:return[2,3967]}}(r),a=babelHelpers.slicedToArray(o,2),i=a[0],c={eid:a[1],version:i,banner_code:e,cdtm:s(),adslot:t.log_id,req_num:n,alid:t.alid};Object(u.a)(c).catch(d.b)}},logAdFail:function(e,t,n,r){var o={eid:3250,version:12,banner_code:e,cdtm:s(),alid:t,req_num:n,ad_error:r};Object(u.a)(o).catch(d.b)},logAdRender:function(e,t,n,r){if(f){var o={eid:3970,adslot:t,version:0,alid:n,cdtm:s(),banner_code:e,req_num:r};Object(u.a)(o).catch(d.b)}},logAdView:function(e,t){if(f){var n=t.item.parameters,r={eid:3968,version:0,banner_code:e,cdtm:s(),alid:n.alid,adslot:n.log_id};Object(u.a)(r).catch(d.b)}}}},2374:function(e,t,n){(function(t){!function(e){"use strict";"object"===babelHelpers.typeof(t)&&"object"===babelHelpers.typeof(t.exports)?t.exports=e:e(window,[".avito.ru",".avito.dev",".googlesyndication.com"],[".js-expandable-banner",".js-banner-1000x120",".js-banner-1000x120 iframe",".js-item-price-banner",".js-item-price-banner iframe"])}(function(i,a,o){"use strict";var c={setHeight:function(e,t,n,r){-1!==o.indexOf(t)&&function(e,t){var n,r=isFinite(Number(t));r&&(n=i.document.querySelector(e))&&("IFRAME"===n.tagName?n.setAttribute("height",t):n.style.height=t+"px");return r}(t,n)&&r&&e.postMessage(r,"*")},addEventListener:function(e,t,n,r){var o;o="document"===t?i.document:"window"===t?i:i.document.querySelector(t);o&&n&&r&&(o.addEventListener(n,a),s[r]=a);function a(){e.postMessage(r,"*")}},hasSupport:function(e,t,n){c[t]&&e.postMessage(n,"*")}};var s={};i.addEventListener("message",function(e){var t=e.origin;if(i.document.origin===t||a.some(function(e){return t.indexOf(e)===t.length-e.length})){var n="string"==typeof e.data?e.data.split("$"):e.data;if("banner-control"===n[0]){var r=n[1],o=n.slice(2);c[r].apply(null,[e.source].concat(o)),i.avito.tracking.trackGTMEvent("ads-debug","message.banner-control",r+"."+o[0])}}})})}).call(this,n(236)(e))},5956:function(e,t,a){"use strict";a.r(t);function m(e){return e?(e.offsetTop||0)+m(e.offsetParent):0}function h(e){if(!e)return 0;var t=window.getComputedStyle(e),n=t.marginTop,r=t.marginBottom;return e.offsetHeight+parseInt(n,10)+parseInt(r,10)}function g(e,t){e&&(e.style.transform="translateY(".concat(t,"px)"))}function b(e,t,n){var r=2<arguments.length&&void 0!==n?n:0;e&&(e.style.top="".concat(t+r,"px"))}function f(t){return function(){var e=document.querySelector(t);e&&(e.style.display="none")}}function i(r,o){var a=!1;return setTimeout(function(){a=!0},5e3),new Promise(function(n){o.addEventListener("DOMContentLoaded",function(){n(o.getElementById(r))});!function t(){setTimeout(function(){var e=o.getElementById(r);e?n(e):a?n(null):t()},10)}()})}function l(t){t.removeAttribute("style"),Array.from(t.children).forEach(function(e){return t.removeChild(e)})}function c(e,t){return Array.from(t.querySelectorAll(e))}function s(c,s,e){return function(){return new Promise(function(o,a){var i=e.googletag;i.cmd.push(function(){var t,e=i.pubads(),n=s.targetings,r=void 0===n?{}:n;t=(t=i.defineSlot(s.dfp_slot,s.sizes,c)).addService(e),Object.assign(r,function(n){return R.reduce(function(e,t){return n.hasOwnProperty(t)&&(e[t]=n[t]),e},{})}(s)),function(t,n){Object.keys(t).forEach(function(e){return n.setTargeting(e,t[e])})}(r,t),i.enableServices(),i.display(c),e.addEventListener("slotRenderEnded",function(e){if(e.slot===t)return e.isEmpty?(a(),void i.destroySlots([t])):void o()})})})}}function n(o){return function(r){return function(e){function t(){return r?Promise.reject(n):n}var n=e.message;return Promise.resolve(n).then(o).then(t,t)}}}function r(){}function p(e){return e.then(n(r)(),n(r)())}function u(e){return e&&e[0]&&e[0].parameters.alid||"no-alid"}function o(t,n){var r=n.containerNode;r.addEventListener("click",function e(){H.b.logBannerClick(t,n),r.removeEventListener("click",e)})}function d(t,n){var r=n.containerNode,o=-1/0;function a(){o=setInterval(function(){var e=document.activeElement;e&&"IFRAME"!==e.tagName||(H.b.logBannerClick(t,n),clearInterval(o),r.removeEventListener("mouseenter",a),r.removeEventListener("mouseleave",i))},100)}function i(){clearInterval(o)}r.addEventListener("mouseenter",a),r.addEventListener("mouseleave",i)}function v(e,t){var n=t.containerNode;if(0<c("iframe",n).length)d(e,t);else{var r=c("*",n);r.forEach(function(e){e.addEventListener("click",a)})}function o(e){e.removeEventListener("click",a)}function a(){H.b.logBannerClick(e,t),r.forEach(o)}}function y(e,t){(function(e){switch(e){case O:case A:return v;case P:case E:case _:return d;case S:default:return o}})(t.item.sellingSystem)(e,t)}var w,k=a(2373),O="AdFox",_="AFS",P="Criteo",E="DFP",j="inner",S="myTarget",I="stub",A="Yandex RTB",x="onBannerReceived",T="onBannerRejected",C="onContainerRemoved",R=["google_adexchange_pf","yandex_rtb_low_block_id","yandex_rtb_low_rate","yandex_rtb_low_stat_id","yandex_rtb_mid_block_id","yandex_rtb_mid_rate","yandex_rtb_mid_stat_id","my_target_id","my_target_rate"],B=a(2371),H=a(2372);function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(n,!0).forEach(function(e){babelHelpers.defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function F(e){return new Promise(function(t,n){var r=!1;return e.then(function(e){return r=!0,n(e)}).catch(function(e){return r?n(e):t(e)})})}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n-1]||0,o=t[n+1]||1/0;if(r<e&&e<o)return n}return-1}function q(e){var t=e.offsets,n=e.pageYOffset,r=e.index,o=e.previousNodeOffset,a=n-e.checkpoint+(t[r-1]||0),i=t.slice(0);return i[r]=Math.min(a,o),i}function D(o,a){return o.map(function(e,t){var n=[o[t-1],o[t-2]];if(n.includes(void 0))return 0;var r=n.reduce(function(e,t){return e+h(t)},0);return Math.max(0,a-r-20)})}function Y(e,t){return!function(e){return["-webkit-sticky","sticky"].includes(window.getComputedStyle(e).position)}(e)||!function(e){var t=document.querySelector(ce),n=t&&void 0!==t.dataset.stickyHeader;return"main"===e||n}(window.avito.pageId)&&!function(e,t,n){return m(e)-n>t[t.length-1]}(document.querySelector(oe)||document.querySelector(ae)||document.querySelector(ne),t,window.outerHeight)}function G(i,c,s){if(!c.length)return B.b;var n=window.outerHeight,r=m(i),u=c.map(function(e,t){return r+t*n});if(u.pop(),function(e){e&&(e.style.position="sticky",e.style.position="-webkit-sticky",e.style.position="-ms-sticky")}(i),Y(i,u))return B.b;var d=function(e){return e.reduce(function(e,t,n){var r=0===n?0:e[n-1];return e.push(h(t)+r),e},[])}(c),l=function(e){var t=e.stickyNode,n=e.pageYOffset,r=e.checkpoints,o=e.defaultOffsets,a=e.headerOffset,i=[0];if(n<m(t))return i;var c=M(n,r),s=[0].concat(babelHelpers.toConsumableArray(o.slice(0,c))),u=o[c-1],d=r[c];return i=q({offsets:s,pageYOffset:n,index:c,previousNodeOffset:u,checkpoint:d}),b(t,-i[c],a),i}({stickyNode:i,pageYOffset:window.pageYOffset,checkpoints:u,defaultOffsets:d,headerOffset:s}),f=D(c,window.outerHeight);!function(e,n){e.forEach(function(e,t){return g(e,n[t])})}(c,f);var p=2,v=c[p];function e(){var e=M(window.pageYOffset,u);if(e<=0)return l=[0],void b(i,0,s);var t=d[e-1],n=u[e];if((v=c[p=e+1])&&2<=p){var r=l[e-1]||0,o=window.pageYOffset-n+r;if(t<=o){var a=f[p]-(o-t);g(v,Math.max(a,0))}}l=q({offsets:l,pageYOffset:window.pageYOffset,index:e,previousNodeOffset:t,checkpoint:n}),b(i,-l[e],s)}function t(){f=D(c,window.outerHeight),e()}return g(v,f[p]),window.addEventListener("resize",t),document.addEventListener("scroll",e),function(){window.removeEventListener("resize",t),document.removeEventListener("scroll",e)}}function z(){if(!ue){se(),function(){var e=document.querySelector(ce);if(e){var t=document.querySelector(oe),n=document.querySelector(ae),r=h(t)+h(n),o=Math.max(r,400);e.style.paddingBottom="".concat(o,"px")}}();var e=document.querySelector(te);if(e){var t=Array.from(e.children),n=function(){var e=document.querySelector(ce);if(!e)return 0;var t=window.avito||{},n=t.abFeatures||{};if(!function(e){var t=e.pageId,n=e.infiniteScroll,r=e.stickyContainerNode;return"main"===t||n&&"vertical"===t||void 0!==r.dataset.stickyHeader}({pageId:t.pageId,infiniteScroll:n.infiniteScroll,stickyContainerNode:e}))return 0;var r=document.querySelector(re),o=r?r.offsetHeight:0,a=document.querySelector(ie),i=a?a.offsetHeight:0;return Math.min(o+i,168)}();se=G(e,t,n)}}}function U(e){return["main","vertical","catalog"].includes(e)}var W="js-ads-loading",J=(w={},babelHelpers.defineProperty(w,A,{isSync:window.avito&&!window.avito.isMobile,check:function(){return window.Ya&&window.Ya.Context&&window.Ya.Context.AdvManager},method:"showRtb",logType:"as"}),babelHelpers.defineProperty(w,O,{isSync:window.avito&&!window.avito.isMobile,check:function(){return window.Ya&&window.Ya.adfoxCode},method:"showAdfox",logType:"as"}),babelHelpers.defineProperty(w,E,{check:function(){return window.googletag&&window.googletag.apiReady},method:"showDfp",logType:"asp",init:function(r,o){return new Promise(function(e){r.window.googletag=r.window.googletag||{cmd:[]};var t=r.commonDFPTargetings,n=r.window.googletag;n.cmd.push(function(){!function(n,r){Object.keys(n).forEach(function(e){var t=n[e];t&&!Array.isArray(t)&&(t=String(t)),t&&r.pubads().setTargeting(e,t)})}(t,n),e(o)})})}}),babelHelpers.defineProperty(w,P,{check:function(){return window.Criteo&&window.Criteo.events},method:"showCriteo",logType:"as"}),babelHelpers.defineProperty(w,S,{check:function(){return window.MRGtag},method:"showMyTarget",logType:"as"}),babelHelpers.defineProperty(w,_,{check:function(){return window._googCsa},method:"showAFS",logType:"as"}),babelHelpers.defineProperty(w,"stub",{method:"showStub"}),babelHelpers.defineProperty(w,"inner",{method:"showInner",logType:"as"}),w),K=function(){function o(){var n=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:J,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window;babelHelpers.classCallCheck(this,o),this.banners={},this.counts={},this.logs={},this.window=t,this.document=this.window.document,this.config=e,this.pendingScripts={},this.logs.errors=[],this.commonDFPTargetings=t.avito.rmp.dfpTargetings||{},this.throttledLog=function(e,t){var n=!(1<arguments.length&&void 0!==t)||t,r=0;return function(){return 0==(n?++r:r++)||.5<Math.random()?e.apply(void 0,arguments):void 0}}(this.logSentry.bind(this));var r="yandexContextAsyncCallbacks";this.window[r]=this.window[r]||[],this.nets=Object.keys(this.config).reduce(function(e,t){return n.config[t].isSync?L({},e,{sync:[].concat(babelHelpers.toConsumableArray(e.sync||[]),[n.start(t)])}):L({},e,babelHelpers.defineProperty({},t,n.start(t)))},{}),this.nets.sync=Promise.all(this.nets.sync||[])}var r;return babelHelpers.createClass(o,[{key:"start",value:function(e){var r=this;return this.checkNetIsReady(e).then(function(){return r.init(e)}).catch(function(e){var t=e.method,n=e.error;r.logError(t,n,"",!0)})}},{key:"init",value:function(e){var t=this.config[e].init;return t?t(this,e):Promise.resolve(e)}},{key:"checkNetIsReady",value:function(a,e,t){var i=this,c=1<arguments.length&&void 0!==e?e:300,s=2<arguments.length&&void 0!==t?t:10,u=this.config[a].check;return u?new Promise(function(r,o){return function e(t){var n=0<arguments.length&&void 0!==t?t:0;return u()?r(a):s<=n?o({method:"checkNetIsReady",error:"Too many attempts(".concat(n,"), ").concat(a," API is not ready")}):(i.window.setTimeout(function(){e(n+1)},c),!0)}()}):Promise.resolve(a)}},{key:"getContainerId",value:function(e,t){return 1<arguments.length&&void 0!==t&&t?"template_".concat(e):e}},{key:"logRequest",value:function(e,t,n,r,o,a){var i=this.config[e].logType,c=n.log_id;if(this.logs[t]=this.logs[t]||[],this.logs[t].push({logId:c,eventType:r,isInternal:o,count:a,parameters:n,timestamp:this.window.Date.now()}),i){var s="".concat(i,":").concat(c,";e:").concat(r,";i:").concat(o?1:0,";ir:1"),u=this.window.Math.random(),d="//www.avito.ru/stat/ad?k=".concat(encodeURIComponent(s),"&r=").concat(u);(new this.window.Image).src=d,H.b.logAdRequest(t,n,a,r)}}},{key:"logError",value:function(e,t,n,r){var o=this.logs.errors,a={method:e,reason:t,data:n,timestamp:this.window.Date.now()};o.push(a),r||this.throttledLog(a)}},{key:"logSentry",value:function(t){k.d(function(e){e.setTag("logger","mnz.rize"),e.setTag("service","rmp"),e.setTag("platform","desktop"),e.setExtra("error",t),k.b("RMP Error")})}},{key:"markBannerAsLoaded",value:function(e){e.classList.remove(W)}},{key:"showDfp",value:function(e,t){var n=E,r=s(e,t,this.window);return this.nets[n].then(r)}},{key:"showRtb",value:function(e,t){var n=A,r=this.config[n],o=r.isSync,a=r.check,i=function(r,o,a,i,c){var s="yandexContextAsyncCallbacks";return function(){return new Promise(function(t,n){function e(){var e={blockId:o.block_id,renderTo:r,statId:o.stat_id,async:!0,pageNumber:o.pageNumber||c,onRender:t};o.hasSearchText&&(e.searchText=o.query),a.Ya.Context.AdvManager.render(e,n)}Boolean(i())?e():(a[s]=a[s]||[],a[s].push(e))})}}(e,t,this.window,a,this.counts[e]);return this.nets[o?"sync":n].then(i)}},{key:"showAdfox",value:function(e,t){var n=O,r=this.config[n].isSync,o=function(r,e,o){var a=e.ownerId,i=e.params;return function(){return new Promise(function(e,t){var n={slide:!1,visibleAfterInit:!0,async:!0,ownerId:a,containerId:r,params:i,onError:t,onStub:t,onRender:function(){e()}};o.Ya.adfoxCode.create(n)})}}(e,t,this.window);return this.nets[r?"sync":n].then(o)}},{key:"showCriteo",value:function(e,t){var n=function(u,t,d){return new Promise(function(e,n){var r=d.window.Criteo,o=d.document.getElementById(u),a=t.zoneid,i=t.overrideZoneFloor,c=t.width,s=t.height;r.events.push(function(){r.DisplayAcceptableAdIfAdblocked({zoneid:a,containerId:u,overrideZoneFloor:i,collapseContainerIfNotAdblocked:!1,callIfNotAdBlocked:function(){l(o),n()},callbacksuccess:e,callbackerror:function(){l(o),n()}}),o.style.width="".concat(c,"px"),o.style.height="".concat(s,"px");var t="criteo-adblock-passback-".concat(a);window.addEventListener("message",function(e){if(e.data&&e.data===t)return l(o),void n()},!1)})})}(e,t,this);return this.nets[P].then(n)}},{key:"showMyTarget",value:function(e,t){var n=function(r,o,a){return function(){return new Promise(function(e,t){var n=a.document.getElementById(r);n.dataset.adClient="ad-".concat(o.ad_slot),n.dataset.adSlot=o.ad_slot,a.MRGtag.push({onAdsSuccess:function(){e()},onNoAds:function(){t()},singleRequest:!1,element:n,preventAutoLoad:!0})})}}(e,t,this.window);return this.nets[S].then(n)}},{key:"showAFS",value:function(e,t){var n=function(o,e,t){return function(){return new Promise(function(n,r){e.query||r(),(0,t._googCsa)("plas",{pubId:"partner-vert-pla-avito-srp",query:e.query,adtest:"on"},{container:o,width:e.width,height:e.height,adLoadedCallback:function(e,t){e===o&&(t?n():r())}})})}}(e,t,this.window);return this.nets[_].then(n)}},{key:"showStub",value:function(e){return this.document.getElementById(e).classList.add("abp-design"),Promise.resolve()}},{key:"showInner",value:function(){return Promise.resolve()}},{key:"showBanner",value:(r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark(function e(d,r,l){var t,n,f,o,p,v,m,h=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(r)){e.next=5;break}return t="Waterfall is not array",this.logError("showBanner",t,r),H.b.logAdFail(d,u(r),0,H.a.POSITION_NOT_EXIST),e.abrupt("return",Promise.reject({code:d,message:t}));case 5:if(n=l?l.id:this.getContainerId(d,!0),!l){e.next=10;break}f=l,e.next=13;break;case 10:return e.next=12,i(n,this.document);case 12:f=e.sent;case 13:if(f){e.next=18;break}return o=this.window.avito.rmp.enabledBanners&&Boolean(this.window.avito.rmp.enabledBanners[d]),this.logError("showBanner","template does not exist",n,o),H.b.logAdFail(d,u(r),0,H.a.CONTAINER_NOT_EXIST),e.abrupt("return",Promise.reject({code:d,message:"template error, id:".concat(n)}));case 18:return this.counts[d]=(this.counts[d]||0)+1,p=this.counts[d],v=this.getContainerId(d),m=[],e.abrupt("return",F(r.reduce(function(e,i,t){var c=i.sellingSystem,s=Boolean(t);if(!h.config.hasOwnProperty(c))return h.logError("showBanner","unknown advert net",c),e;var u=h.config[c].method;return e.then(function(){m.push(c);var e=h.banners[d],t="desktop_lower"===d;e&&(h.logRequest(e.key,d,e.item.parameters,H.c.PASSBACK,e.isInternal,e.count),(e.cb||B.b)(),s=!0,t||(e.containerNode.remove(),delete h.banners[d]));var n=L({},i.parameters);if(t){var r=l.dataset.number;v=v+"_"+r,n.pageNumber=parseInt(r,10)}var o=f.children[0].cloneNode();o.id=v,f.parentNode.appendChild(o),h.logRequest(c,d,n,H.c.REQUEST,s,p);var a=h[u](v,n);return F(a).then(function(e){h.onBannerRejected(d,{containerNode:o,key:c,item:i,isInternal:s,count:p,error:e})}).catch(function(e){return h.onBannerReceived(d,{containerNode:o,containerId:v,key:c,item:i,isInternal:s,count:p,onBannerReceivedInfo:e}),Promise.reject()})})},Promise.resolve())).then(babelHelpers.asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(y(d,h.banners[d]),Object(B.a)())return e.next=4,a.e("30f77923").then(a.bind(null,5684));e.next=7;break;case 4:t=e.sent,(0,t.addViewHandler)(d,h.banners[d]);case 7:return n=h.banners[d].item.parameters.log_id,H.b.logAdRender(d,n,u(r),h.counts[d]),e.abrupt("return",{code:d,message:"[".concat(d,"] shows × ").concat(h.counts[d]," resolved ").concat(m.join(" to "))});case 10:case"end":return e.stop()}},e)}))).catch(function(){return H.b.logAdFail(d,u(r),h.counts[d],H.a.POSITION_FULLY_REJECTED),Promise.reject({code:d,message:"[".concat(d,"] shows × ").concat(h.counts[d]," rejected ").concat(m.join(" passback to "))})}).finally(function(){f&&h.markBannerAsLoaded(f.parentNode)}));case 23:case"end":return e.stop()}},e,this)})),function(e,t,n){return r.apply(this,arguments)})},{key:"reloadAdFoxBanner",value:function(e){return window.Ya.adfoxCode.reload(e),this.counts[e]=(this.counts[e]||0)+1,Promise.resolve({code:e,message:"[".concat(e,"] shows × ").concat(this.counts[e]," resolved ").concat(O," to")})}},{key:"reloadBanner",value:function(e,t){return this.banners[e].key===O?this.reloadAdFoxBanner(e):this.showBanner(e,t)}},{key:"onBannerReceived",value:function(e,t){this.banners[e]=t;var n=new CustomEvent(x,{detail:{code:e}});this.dispatchEvent(n)}},{key:"onBannerRejected",value:function(e,t){var n=t.key,r=t.item,o=t.isInternal,a=t.count,i=t.containerNode;this.logRequest(n,e,r.parameters,H.c.PASSBACK,o,a),i.remove();var c=new CustomEvent(T,{detail:{code:e}});this.dispatchEvent(c)}},{key:"dispatchEvent",value:function(e){this.window.dispatchEvent(e)}},{key:"addEventListener",value:function(e,t){this.window.addEventListener(e,t)}},{key:"showAllBanners",value:function(t){var n=this;return"object"!==babelHelpers.typeof(t)||Array.isArray(t)||null===t?(this.logError("showAllBanners","not a object",t),[Promise.reject()]):Object.keys(t).map(function(e){return n.showBanner(e,t[e])})}}]),o}(),X=a(2374),Q=a.n(X),V=["vr_top","tgb1","vr_low"],Z=["serp_top","serp_low","desktop_low","desktop_lower"],$=["serp_top","serp_low"],ee=["map_filter","map_search"],te=".js-promo-item-sticky",ne=".category-map",re=".js-header-container",oe=".avito-ads-container_desktop_low",ae=".js-pages",ie=".js-search-form-sticky",ce=".js-promo-sticky-container",se=B.b,ue=!1,de=a(6055);function le(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function fe(e,t){return{sellingSystem:I,parameters:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?le(n,!0).forEach(function(e){babelHelpers.defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):le(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t,{log_id:e})}}var pe=Object(de.f)(V);function ve(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function me(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ve(n,!0).forEach(function(e){babelHelpers.defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ve(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function he(e){var n=e.parameters;if(!n.dfp_slot)return fe("empty-slot-stub");var t=Object.keys(n).filter(function(e){return e.startsWith("google_")||e.startsWith("yandex_")}).reduce(function(e,t){return e[t]=n[t],e},{});return me({},e,{parameters:me({},n,{log_id:n.dfp_slot}),targetings:t})}function ge(e){var t=e.parameters,n=t.block_id,r=n?n.replace("8_","").split("-"):[null,null],o=babelHelpers.slicedToArray(r,2),a={p1:o[0],p2:o[1]};t.isVideo&&(n=n&&n.replace("8_",""),a={replayMode:"manual"});var i="".concat(t.block_id||"NO_BLOCK_ID","-").concat(t.stat_id);return me({},e,{parameters:me({},t,{block_id:n,params:me({},t.params,{},a,{"partner-stat-id":t.stat_id}),ownerId:t.ownerId||245183,log_id:i})})}function be(e){var t=e.parameters,n=t.block_id.replace(/[RA]-/g,"");return me({},e,{parameters:me({},t,{log_id:"6_".concat(n,"-").concat(t.stat_id,"-rtb")})})}function ye(e){return e}function we(e){var o={};return Object.entries(e).forEach(function(e){var t=babelHelpers.slicedToArray(e,2),n=t[0],r=t[1];o[n]=r.map(function(e){return function(e){var t=e.sellingSystem;return e.parameters?t===E?he:t===O?ge:t===A?be:ye:ye}(e)(e)})}),o}function ke(e,r){e.filter(function(e){return function(e){var t=window.avito.abFeatures,n=t.adsRefreshCheckScrollFixedHeight,r=t.adsRefreshCheckIntervalFixedHeight,o=["vr_low"];return(n||r)&&o.push("tgb1"),o.includes(e)}(e.code)}).forEach(function(e){var t=e.code,n=e.position;return r.reloadBanner(t,n).then(function(e){e.message})})}function Oe(e,t){var n=e.code;e.message,function(e){var t=document.querySelector(e);t&&t.remove()}(".avito-ads-container_".concat(n));var r=new CustomEvent(C,{detail:{code:n}});t.dispatchEvent(r)}function _e(e,t,n){if("main"===window.avito.pageId){var r=window.avito.abFeatures,o=r.adsRefreshCheckScrollDynamicHeight,a=r.adsRefreshCheckScrollFixedHeight,i=r.adsRefreshCheckIntervalDynamicHeight,c=r.adsRefreshCheckIntervalFixedHeight,s=function(e,n){return e.map(function(e){var t=e.code;return{code:t,position:n[t]}})}(e,t);(o||a)&&function(t,n){var r=0,o=!1;setTimeout(function(){o=!0},3e3),window.addEventListener("scroll",Object(de.i)(function(){var e=window.pageYOffset||document.documentElement.scrollTop;800<Math.abs(e-r)&&o&&(r=e,ke(t,n))},3e3))}(s,n),(i||c)&&function(t,n){setTimeout(function e(){ke(t,n),setTimeout(e,1e4)},1e4)}(s,n)}}function Pe(n,r){avito.rmp.initBannerOnRecommendationsInifinite=function(e,t){n.showBanner(e,r[e],t).catch(function(){return f("#".concat(t.id))})},avito.rmp.updateStickyEffect=function(e,t){t||e.reduce(function(e,t){return e+t.items.length},0)<=40&&function(){var e=document.querySelector(te);e&&(b(e,0),Array.from(e.children).forEach(function(e){return g(e,0)}),se(),ue=!0)}()}}function Ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function je(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ee(n,!0).forEach(function(e){babelHelpers.defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ee(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Se=a(2375);function Ie(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Ae(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ie(n,!0).forEach(function(e){babelHelpers.defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ie(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}window.avito=window.avito||{};var xe=new K;U(window.avito.pageId)&&xe.addEventListener(C,z),function(){var s=window.avito;s.abFeatures=s.abFeatures||{};var n=s.banners;if(n){Q()(window,[".avito.ru",".avito.dev",".googlesyndication.com"],[".js-expandable-banner",".js-banner-1000x120",".js-banner-1000x120 iframe",".js-item-price-banner",".js-item-price-banner iframe"]),s.rmp=s.rmp||{},s.rmp.logs=xe.logs,s.rmp.current=xe.banners,s.rmp.counts=xe.counts;var e=window.abp&&window.abp.installed,t=function(n,r,o){return Object.keys(n).reduce(function(e,t){return e[t]=function(e,t,n){return n&&"catalog"===t&&["ldr_low","vr_low","tgb1"].includes(e)}(t,r,o)?[fe("abp-stub")]:n[t],e},{})}(n,s.pageId,e),r=we(t),o=babelHelpers.toConsumableArray(V);if("main"===s.pageId||s.abFeatures.infiniteScroll?(Pe(xe,r),o=[].concat(babelHelpers.toConsumableArray(o),babelHelpers.toConsumableArray(Z))):"vertical"!==s.pageId||s.abFeatures.infiniteScroll?"catalog"===s.pageId&&(function(r,o){avito.rmp.initMapFilterPosition=function(e){o.map_filter&&r.showBanner(e,o.map_filter).catch(f(e))},avito.rmp.initMapSearchPosition=function(e,t){if(o.map_search){var n=o.map_search.map(function(e){return je({},e,{parameters:je({},e.parameters,{pageNumber:t})})});r.showBanner(e,n).catch(f(e))}}}(xe,r),o=[].concat(babelHelpers.toConsumableArray(o),babelHelpers.toConsumableArray(ee))):(function(e,t){avito.rmp.initSerpPositions=function(){t.serp_top&&e.showBanner("serp_top",t.serp_top).catch(f("#serp_top")),t.serp_low&&e.showBanner("serp_low",t.serp_low).catch(f("#serp_low"))}}(xe,r),o=[].concat(babelHelpers.toConsumableArray(o),babelHelpers.toConsumableArray($))),"item"===s.pageId&&s.abFeatures.adsWaterfall){var a={eventSampling:s.rmp.enableEventSampling,pagetype:s.pageId,rcid:s.categoryId,commonDfpTargetings:s.rmp.dfpTargetings||{}},i=new Se.Waterfall(n,a);i.on(Se.WaterfallEvent.RENDER,function(e,t){"ldr_top"===e&&t.parentNode.classList.remove("js-ads-loading")}),i.renderAll(),s.waterfall={positions:i.positions,logs:i.getLogs(),nets:i.nets}}else{(function(n,r){var e=r.showAllBanners(n).map(function(e){return e.catch(function(e){return Oe(e,r)})});return Promise.all(e).then(function(e){var t=e.filter(Boolean);return _e(t,n,r)})})(pe(r),xe).finally(function(){U(window.avito.pageId)&&z()});var c=function(n,r){return Object.keys(n).reduce(function(e,t){return r.includes(t)||(e[t]=n[t]),e},{})}(r,o);xe.showAllBanners(c).forEach(p)}window.avito.rmp.readinessToken.signal();var u=function(e){return/^R-(A-)?\d+-\d+$/.test(e)},d=function(e){var t=(n[e]||[]).find(function(e){return e.sellingSystem===E});return t?Ae({},t,{parameters:Ae({},t.parameters,{targetings:Ae({},t.parameters.targetings)})}):fe("no-dfp-slot-found",{targetings:{}})};s.adRequestCounter=function(e,t,n,r){var o=xe.counts[t]||0,a="inner",i={log_id:e};if(!e){var c=d(t);i=c.parameters,a=c.sellingSystem}xe.logRequest(a,t,i,n,r,o),s.tracking.trackGTMEvent("ads-debug","avito.adRequestCounter",t)},s.showRTB=function(e){var t={avito:!0,bannerPosition:e,passbackFrom:"dfp",yandexBlockId:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",yandexStatId:2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",yandexOffer:3<arguments.length&&void 0!==arguments[3]?arguments[3]:0};"[".concat(t.bannerPosition,"] passback through avito.showRTB from ").concat(t.passbackFrom.toUpperCase()),p(xe.showBanner.apply(xe,babelHelpers.toConsumableArray(l(t)))),s.tracking.trackGTMEvent("ads-debug","avito.showRTB",e)},window.addEventListener("message",function(n){if(-1!==n.origin.indexOf("//tpc.googlesyndication.com")||n.origin===window.document.origin){var e=n.data;if("string"!=typeof e&&e.hasOwnProperty("avito")){var t=e.passbackFrom,r=void 0===t?"inner":t;"[".concat(e.bannerPosition,"] passback through postMessage from ").concat(r),p(xe.showBanner.apply(xe,babelHelpers.toConsumableArray(l(e)))),s.tracking.trackGTMEvent("ads-debug","message.passback",e.bannerPosition)}else if(s.isMobile&&"string"==typeof e){var o;try{o=JSON.parse(n.data)}catch(e){return}if("dfp"===o.event&&"hide-me"===o.command)Array.from(document.querySelectorAll("iframe")).forEach(function(e){if(e.contentWindow===n.source)for(var t=e.parentNode;t!==document.body;){if(t.classList.contains("ads-dfp"))return void t.classList.add("hidden");t=t.parentNode}}),s.tracking.trackGTMEvent("ads-debug","message.hide-me")}}})}function l(t){return[t.bannerPosition,function(e){var t=e.passbackFrom,n=e.yandexBlockId;if("mailru"===e.tryToShow)return["mailru"];switch(t){case"dfp":return u(n)?["rtb","dfp"]:["dfp"];case"mailru":return["dfp"];default:return["stub"]}}(t).map(function(e){return function(e){var t=e.passbackFrom,n=e.passbackTo,r=e.bannerPosition;switch(n){case"rtb":var o=e.yandexBlockId,a=e.yandexStatId;return{sellingSystem:A,parameters:{block_id:o,stat_id:a,log_id:"6_".concat(o.replace(/[RA]-/g,""),"-").concat(a,"-rtb")}};case"dfp":var i=d(r),c={};return"dfp"===t&&(c.offer_yandex=e.yandexOffer,c.nid="RTB"),"mailru"===t&&(c.exclude_mailru=e.mailRuParams.exclude_mailru,c.nid=e.mailRuParams.nid),Object.assign(i.parameters.targetings,c),i;case"mailru":return{sellingSystem:j,parameters:{log_id:e.mailRuParams.id}};default:return fe("no-slot-found",{targetings:{}})}}(Ae({},t,{passbackTo:e}))})]}}()}});